var mi=Object.defineProperty;var xt=n=>{throw TypeError(n)};var Si=(n,t,i)=>t in n?mi(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var Pt=(n,t,i)=>Si(n,typeof t!="symbol"?t+"":t,i),Kn=(n,t,i)=>t.has(n)||xt("Cannot "+i);var on=(n,t,i)=>(Kn(n,t,"read from private field"),i?i.call(n):t.get(n)),Sn=(n,t,i)=>t.has(n)?xt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,i),jn=(n,t,i,e)=>(Kn(n,t,"write to private field"),e?e.call(n,i):t.set(n,i),i),Rt=(n,t,i)=>(Kn(n,t,"access private method"),i);import{t as Vt,a as tn,n as Vn,d as bn,c as _i}from"../chunks/dYX3xZNN.js";import"../chunks/cGF85JzE.js";import{ak as Ei,j as wi,a7 as Mi,ad as _n,a8 as yi,ag as K,ae as J,af as Q,w as B,ao as Nt,F as Yn,x as Dt,m as It,aq as xi}from"../chunks/LEXpExa3.js";import{i as Pi,b as Ri,C as Ni,e as An,s as q,a as Tn,T as Di}from"../chunks/DCNsyyvv.js";import{s as nt}from"../chunks/-H-iKN3j.js";import{i as Yt}from"../chunks/C3AQ3vhK.js";import{o as Ii}from"../chunks/Bj_kfN9V.js";var an,gn,Dn,Jn,Kt;const Qn=class Qn{constructor(t){Sn(this,Jn);Sn(this,an,new WeakMap);Sn(this,gn);Sn(this,Dn);jn(this,Dn,t)}observe(t,i){var e=on(this,an).get(t)||new Set;return e.add(i),on(this,an).set(t,e),Rt(this,Jn,Kt).call(this).observe(t,on(this,Dn)),()=>{var r=on(this,an).get(t);r.delete(i),r.size===0&&(on(this,an).delete(t),on(this,gn).unobserve(t))}}};an=new WeakMap,gn=new WeakMap,Dn=new WeakMap,Jn=new WeakSet,Kt=function(){return on(this,gn)??jn(this,gn,new ResizeObserver(t=>{for(var i of t){Qn.entries.set(i.target,i);for(var e of on(this,an).get(i.target)||[])e(i)}}))},Pt(Qn,"entries",new WeakMap);let ot=Qn;var Yi=new ot({box:"border-box"});function Ai(n,t,i){var e=Yi.observe(n,()=>i(n[t]));Ei(()=>(wi(()=>i(n[t])),e))}class fn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const u=i[r],l=t+u,f=Math.abs(t)<Math.abs(u)?t-(l-u):u-(l-t);f&&(i[e++]=f),t=l}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,u,l=0;if(i>0){for(l=t[--i];i>0&&(e=l,r=t[--i],l=e+r,u=r-(l-e),!u););i>0&&(u<0&&t[i-1]<0||u>0&&t[i-1]>0)&&(r=u*2,e=l+r,r==e-l&&(l=e))}return l}}function*Ti(n){for(const t of n)yield*t}function jt(n){return Array.from(Ti(n))}var z=1e-6,I=Math.PI,X=I/2,At=I/4,V=I*2,U=180/I,O=I/180,L=Math.abs,bt=Math.atan,xn=Math.atan2,C=Math.cos,zi=Math.exp,ki=Math.log,F=Math.sin,Li=Math.sign||function(n){return n>0?1:n<0?-1:0},cn=Math.sqrt,Ci=Math.tan;function Fi(n){return n>1?0:n<-1?I:Math.acos(n)}function Pn(n){return n>1?X:n<-1?-X:Math.asin(n)}function b(){}function Wn(n,t){n&&zt.hasOwnProperty(n.type)&&zt[n.type](n,t)}var Tt={Feature:function(n,t){Wn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)Wn(i[e].geometry,t)}},zt={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){ut(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)ut(i[e],t,0)},Polygon:function(n,t){kt(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)kt(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)Wn(i[e],t)}};function ut(n,t,i){var e=-1,r=n.length-i,u;for(t.lineStart();++e<r;)u=n[e],t.point(u[0],u[1],u[2]);t.lineEnd()}function kt(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)ut(n[i],t,1);t.polygonEnd()}function hn(n,t){n&&Tt.hasOwnProperty(n.type)?Tt[n.type](n,t):Wn(n,t)}function at(n){return[xn(n[1],n[0]),Pn(n[2])]}function dn(n){var t=n[0],i=n[1],e=C(i);return[e*C(t),e*F(t),F(i)]}function zn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function qn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function tt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function kn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function lt(n){var t=cn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function ft(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function st(n,t){return L(n)>I&&(n-=Math.round(n/V)*V),[n,t]}st.invert=st;function ni(n,t,i){return(n%=V)?t||i?ft(Ct(n),Ft(t,i)):Ct(n):t||i?Ft(t,i):st}function Lt(n){return function(t,i){return t+=n,L(t)>I&&(t-=Math.round(t/V)*V),[t,i]}}function Ct(n){var t=Lt(n);return t.invert=Lt(-n),t}function Ft(n,t){var i=C(n),e=F(n),r=C(t),u=F(t);function l(f,g){var v=C(g),o=C(f)*v,a=F(f)*v,s=F(g),p=s*i+o*e;return[xn(a*r-p*u,o*i-s*e),Pn(p*r+a*u)]}return l.invert=function(f,g){var v=C(g),o=C(f)*v,a=F(f)*v,s=F(g),p=s*r-a*u;return[xn(a*r+s*u,o*i+p*e),Pn(p*i-o*e)]},l}function Oi(n){n=ni(n[0]*O,n[1]*O,n.length>2?n[2]*O:0);function t(i){return i=n(i[0]*O,i[1]*O),i[0]*=U,i[1]*=U,i}return t.invert=function(i){return i=n.invert(i[0]*O,i[1]*O),i[0]*=U,i[1]*=U,i},t}function Hi(n,t,i,e,r,u){if(i){var l=C(t),f=F(t),g=e*i;r==null?(r=t+e*V,u=t-g/2):(r=Ot(l,r),u=Ot(l,u),(e>0?r<u:r>u)&&(r+=e*V));for(var v,o=r;e>0?o>u:o<u;o-=g)v=at([l,-f*C(o),-f*F(o)]),n.point(v[0],v[1])}}function Ot(n,t){t=dn(t),t[0]-=n,lt(t);var i=Fi(-t[1]);return((-t[2]<0?-i:i)+V-z)%V}function ti(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:b,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function Hn(n,t){return L(n[0]-t[0])<z&&L(n[1]-t[1])<z}function Ln(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function ii(n,t,i,e,r){var u=[],l=[],f,g;if(n.forEach(function(h){if(!((P=h.length-1)<=0)){var P,m=h[0],N=h[P],E;if(Hn(m,N)){if(!m[2]&&!N[2]){for(r.lineStart(),f=0;f<P;++f)r.point((m=h[f])[0],m[1]);r.lineEnd();return}N[0]+=2*z}u.push(E=new Ln(m,h,null,!0)),l.push(E.o=new Ln(m,null,E,!1)),u.push(E=new Ln(N,h,null,!1)),l.push(E.o=new Ln(N,null,E,!0))}}),!!u.length){for(l.sort(t),Ht(u),Ht(l),f=0,g=l.length;f<g;++f)l[f].e=i=!i;for(var v=u[0],o,a;;){for(var s=v,p=!0;s.v;)if((s=s.n)===v)return;o=s.z,r.lineStart();do{if(s.v=s.o.v=!0,s.e){if(p)for(f=0,g=o.length;f<g;++f)r.point((a=o[f])[0],a[1]);else e(s.x,s.n.x,1,r);s=s.n}else{if(p)for(o=s.p.z,f=o.length-1;f>=0;--f)r.point((a=o[f])[0],a[1]);else e(s.x,s.p.x,-1,r);s=s.p}s=s.o,o=s.z,p=!p}while(!s.v);r.lineEnd()}}}function Ht(n){if(t=n.length){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function it(n){return L(n[0])<=I?n[0]:Li(n[0])*((L(n[0])+I)%V-I)}function Wi(n,t){var i=it(t),e=t[1],r=F(e),u=[F(i),-C(i),0],l=0,f=0,g=new fn;r===1?e=X+z:r===-1&&(e=-X-z);for(var v=0,o=n.length;v<o;++v)if(s=(a=n[v]).length)for(var a,s,p=a[s-1],h=it(p),P=p[1]/2+At,m=F(P),N=C(P),E=0;E<s;++E,h=S,m=d,N=M,p=y){var y=a[E],S=it(y),R=y[1]/2+At,d=F(R),M=C(R),_=S-h,w=_>=0?1:-1,Y=w*_,x=Y>I,W=m*d;if(g.add(xn(W*w*F(Y),N*M+W*C(Y))),l+=x?_+w*V:_,x^h>=i^S>=i){var k=qn(dn(p),dn(y));lt(k);var A=qn(u,k);lt(A);var c=(x^_>=0?-1:1)*Pn(A[2]);(e>c||e===c&&(k[0]||k[1]))&&(f+=x^_>=0?1:-1)}}return(l<-1e-6||l<z&&g<-1e-12)^f&1}function ei(n,t,i,e){return function(r){var u=t(r),l=ti(),f=t(l),g=!1,v,o,a,s={point:p,lineStart:P,lineEnd:m,polygonStart:function(){s.point=N,s.lineStart=E,s.lineEnd=y,o=[],v=[]},polygonEnd:function(){s.point=p,s.lineStart=P,s.lineEnd=m,o=jt(o);var S=Wi(v,e);o.length?(g||(r.polygonStart(),g=!0),ii(o,Gi,S,i,r)):S&&(g||(r.polygonStart(),g=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),o=v=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(S,R){n(S,R)&&r.point(S,R)}function h(S,R){u.point(S,R)}function P(){s.point=h,u.lineStart()}function m(){s.point=p,u.lineEnd()}function N(S,R){a.push([S,R]),f.point(S,R)}function E(){f.lineStart(),a=[]}function y(){N(a[0][0],a[0][1]),f.lineEnd();var S=f.clean(),R=l.result(),d,M=R.length,_,w,Y;if(a.pop(),v.push(a),a=null,!!M){if(S&1){if(w=R[0],(_=w.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),d=0;d<_;++d)r.point((Y=w[d])[0],Y[1]);r.lineEnd()}return}M>1&&S&2&&R.push(R.pop().concat(R.shift())),o.push(R.filter(qi))}}return s}}function qi(n){return n.length>1}function Gi(n,t){return((n=n.x)[0]<0?n[1]-X-z:X-n[1])-((t=t.x)[0]<0?t[1]-X-z:X-t[1])}const Wt=ei(function(){return!0},$i,Zi,[-I,-X]);function $i(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(u,l){var f=u>0?I:-I,g=L(u-t);L(g-I)<z?(n.point(t,i=(i+l)/2>0?X:-X),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(f,i),n.point(u,i),r=0):e!==f&&g>=I&&(L(t-e)<z&&(t-=e*z),L(u-f)<z&&(u-=f*z),i=Xi(t,i,u,l),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(f,i),r=0),n.point(t=u,i=l),e=f},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function Xi(n,t,i,e){var r,u,l=F(n-i);return L(l)>z?bt((F(t)*(u=C(e))*F(i)-F(e)*(r=C(t))*F(n))/(r*u*l)):(t+e)/2}function Zi(n,t,i,e){var r;if(n==null)r=i*X,e.point(-I,r),e.point(0,r),e.point(I,r),e.point(I,0),e.point(I,-r),e.point(0,-r),e.point(-I,-r),e.point(-I,0),e.point(-I,r);else if(L(n[0]-t[0])>z){var u=n[0]<t[0]?I:-I;r=i*u/2,e.point(-u,r),e.point(0,r),e.point(u,r)}else e.point(t[0],t[1])}function Bi(n){var t=C(n),i=2*O,e=t>0,r=L(t)>z;function u(o,a,s,p){Hi(p,n,i,s,o,a)}function l(o,a){return C(o)*C(a)>t}function f(o){var a,s,p,h,P;return{lineStart:function(){h=p=!1,P=1},point:function(m,N){var E=[m,N],y,S=l(m,N),R=e?S?0:v(m,N):S?v(m+(m<0?I:-I),N):0;if(!a&&(h=p=S)&&o.lineStart(),S!==p&&(y=g(a,E),(!y||Hn(a,y)||Hn(E,y))&&(E[2]=1)),S!==p)P=0,S?(o.lineStart(),y=g(E,a),o.point(y[0],y[1])):(y=g(a,E),o.point(y[0],y[1],2),o.lineEnd()),a=y;else if(r&&a&&e^S){var d;!(R&s)&&(d=g(E,a,!0))&&(P=0,e?(o.lineStart(),o.point(d[0][0],d[0][1]),o.point(d[1][0],d[1][1]),o.lineEnd()):(o.point(d[1][0],d[1][1]),o.lineEnd(),o.lineStart(),o.point(d[0][0],d[0][1],3)))}S&&(!a||!Hn(a,E))&&o.point(E[0],E[1]),a=E,p=S,s=R},lineEnd:function(){p&&o.lineEnd(),a=null},clean:function(){return P|(h&&p)<<1}}}function g(o,a,s){var p=dn(o),h=dn(a),P=[1,0,0],m=qn(p,h),N=zn(m,m),E=m[0],y=N-E*E;if(!y)return!s&&o;var S=t*N/y,R=-t*E/y,d=qn(P,m),M=kn(P,S),_=kn(m,R);tt(M,_);var w=d,Y=zn(M,w),x=zn(w,w),W=Y*Y-x*(zn(M,M)-1);if(!(W<0)){var k=cn(W),A=kn(w,(-Y-k)/x);if(tt(A,M),A=at(A),!s)return A;var c=o[0],D=a[0],T=o[1],H=a[1],G;D<c&&(G=c,c=D,D=G);var ln=D-c,nn=L(ln-I)<z,$=nn||ln<z;if(!nn&&H<T&&(G=T,T=H,H=G),$?nn?T+H>0^A[1]<(L(A[0]-c)<z?T:H):T<=A[1]&&A[1]<=H:ln>I^(c<=A[0]&&A[0]<=D)){var Z=kn(w,(-Y+k)/x);return tt(Z,M),[A,at(Z)]}}}function v(o,a){var s=e?n:I-n,p=0;return o<-s?p|=1:o>s&&(p|=2),a<-s?p|=4:a>s&&(p|=8),p}return ei(l,f,u,e?[0,-n]:[-I,n-I])}function Ui(n,t,i,e,r,u){var l=n[0],f=n[1],g=t[0],v=t[1],o=0,a=1,s=g-l,p=v-f,h;if(h=i-l,!(!s&&h>0)){if(h/=s,s<0){if(h<o)return;h<a&&(a=h)}else if(s>0){if(h>a)return;h>o&&(o=h)}if(h=r-l,!(!s&&h<0)){if(h/=s,s<0){if(h>a)return;h>o&&(o=h)}else if(s>0){if(h<o)return;h<a&&(a=h)}if(h=e-f,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<a&&(a=h)}else if(p>0){if(h>a)return;h>o&&(o=h)}if(h=u-f,!(!p&&h<0)){if(h/=p,p<0){if(h>a)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<a&&(a=h)}return o>0&&(n[0]=l+o*s,n[1]=f+o*p),a<1&&(t[0]=l+a*s,t[1]=f+a*p),!0}}}}}var Cn=1e9,Fn=-1e9;function Ji(n,t,i,e){function r(v,o){return n<=v&&v<=i&&t<=o&&o<=e}function u(v,o,a,s){var p=0,h=0;if(v==null||(p=l(v,a))!==(h=l(o,a))||g(v,o)<0^a>0)do s.point(p===0||p===3?n:i,p>1?e:t);while((p=(p+a+4)%4)!==h);else s.point(o[0],o[1])}function l(v,o){return L(v[0]-n)<z?o>0?0:3:L(v[0]-i)<z?o>0?2:1:L(v[1]-t)<z?o>0?1:0:o>0?3:2}function f(v,o){return g(v.x,o.x)}function g(v,o){var a=l(v,1),s=l(o,1);return a!==s?a-s:a===0?o[1]-v[1]:a===1?v[0]-o[0]:a===2?v[1]-o[1]:o[0]-v[0]}return function(v){var o=v,a=ti(),s,p,h,P,m,N,E,y,S,R,d,M={point:_,lineStart:W,lineEnd:k,polygonStart:Y,polygonEnd:x};function _(c,D){r(c,D)&&o.point(c,D)}function w(){for(var c=0,D=0,T=p.length;D<T;++D)for(var H=p[D],G=1,ln=H.length,nn=H[0],$,Z,In=nn[0],pn=nn[1];G<ln;++G)$=In,Z=pn,nn=H[G],In=nn[0],pn=nn[1],Z<=e?pn>e&&(In-$)*(e-Z)>(pn-Z)*(n-$)&&++c:pn<=e&&(In-$)*(e-Z)<(pn-Z)*(n-$)&&--c;return c}function Y(){o=a,s=[],p=[],d=!0}function x(){var c=w(),D=d&&c,T=(s=jt(s)).length;(D||T)&&(v.polygonStart(),D&&(v.lineStart(),u(null,null,1,v),v.lineEnd()),T&&ii(s,f,c,u,v),v.polygonEnd()),o=v,s=p=h=null}function W(){M.point=A,p&&p.push(h=[]),R=!0,S=!1,E=y=NaN}function k(){s&&(A(P,m),N&&S&&a.rejoin(),s.push(a.result())),M.point=_,S&&o.lineEnd()}function A(c,D){var T=r(c,D);if(p&&h.push([c,D]),R)P=c,m=D,N=T,R=!1,T&&(o.lineStart(),o.point(c,D));else if(T&&S)o.point(c,D);else{var H=[E=Math.max(Fn,Math.min(Cn,E)),y=Math.max(Fn,Math.min(Cn,y))],G=[c=Math.max(Fn,Math.min(Cn,c)),D=Math.max(Fn,Math.min(Cn,D))];Ui(H,G,n,t,i,e)?(S||(o.lineStart(),o.point(H[0],H[1])),o.point(G[0],G[1]),T||o.lineEnd(),d=!1):T&&(o.lineStart(),o.point(c,D),d=!1)}E=c,y=D,S=T}return M}}const ct=n=>n;var et=new fn,pt=new fn,ri,oi,ht,vt,un={point:b,lineStart:b,lineEnd:b,polygonStart:function(){un.lineStart=Qi,un.lineEnd=Ki},polygonEnd:function(){un.lineStart=un.lineEnd=un.point=b,et.add(L(pt)),pt=new fn},result:function(){var n=et/2;return et=new fn,n}};function Qi(){un.point=Vi}function Vi(n,t){un.point=ui,ri=ht=n,oi=vt=t}function ui(n,t){pt.add(vt*n-ht*t),ht=n,vt=t}function Ki(){ui(ri,oi)}var mn=1/0,Gn=mn,Rn=-mn,$n=Rn,Xn={point:ji,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b,result:function(){var n=[[mn,Gn],[Rn,$n]];return Rn=$n=-(Gn=mn=1/0),n}};function ji(n,t){n<mn&&(mn=n),n>Rn&&(Rn=n),t<Gn&&(Gn=t),t>$n&&($n=t)}var gt=0,dt=0,En=0,Zn=0,Bn=0,vn=0,mt=0,St=0,wn=0,ai,li,en,rn,j={point:sn,lineStart:qt,lineEnd:Gt,polygonStart:function(){j.lineStart=te,j.lineEnd=ie},polygonEnd:function(){j.point=sn,j.lineStart=qt,j.lineEnd=Gt},result:function(){var n=wn?[mt/wn,St/wn]:vn?[Zn/vn,Bn/vn]:En?[gt/En,dt/En]:[NaN,NaN];return gt=dt=En=Zn=Bn=vn=mt=St=wn=0,n}};function sn(n,t){gt+=n,dt+=t,++En}function qt(){j.point=bi}function bi(n,t){j.point=ne,sn(en=n,rn=t)}function ne(n,t){var i=n-en,e=t-rn,r=cn(i*i+e*e);Zn+=r*(en+n)/2,Bn+=r*(rn+t)/2,vn+=r,sn(en=n,rn=t)}function Gt(){j.point=sn}function te(){j.point=ee}function ie(){fi(ai,li)}function ee(n,t){j.point=fi,sn(ai=en=n,li=rn=t)}function fi(n,t){var i=n-en,e=t-rn,r=cn(i*i+e*e);Zn+=r*(en+n)/2,Bn+=r*(rn+t)/2,vn+=r,r=rn*n-en*t,mt+=r*(en+n),St+=r*(rn+t),wn+=r*3,sn(en=n,rn=t)}function si(n){this._context=n}si.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,V);break}}},result:b};var _t=new fn,rt,ci,pi,Mn,yn,Nn={point:b,lineStart:function(){Nn.point=re},lineEnd:function(){rt&&hi(ci,pi),Nn.point=b},polygonStart:function(){rt=!0},polygonEnd:function(){rt=null},result:function(){var n=+_t;return _t=new fn,n}};function re(n,t){Nn.point=hi,ci=Mn=n,pi=yn=t}function hi(n,t){Mn-=n,yn-=t,_t.add(cn(Mn*Mn+yn*yn)),Mn=n,yn=t}let $t,Un,Xt,Zt;class Bt{constructor(t){this._append=t==null?vi:oe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,i){switch(this._point){case 0:{this._append`M${t},${i}`,this._point=1;break}case 1:{this._append`L${t},${i}`;break}default:{if(this._append`M${t},${i}`,this._radius!==Xt||this._append!==Un){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,Xt=e,Un=this._append,Zt=this._,this._=r}this._+=Zt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function vi(n){let t=1;this._+=n[0];for(const i=n.length;t<i;++t)this._+=arguments[t]+n[t]}function oe(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return vi;if(t!==$t){const i=10**t;$t=t,Un=function(r){let u=1;this._+=r[0];for(const l=r.length;u<l;++u)this._+=Math.round(arguments[u]*i)/i+r[u]}}return Un}function ue(n,t){let i=3,e=4.5,r,u;function l(f){return f&&(typeof e=="function"&&u.pointRadius(+e.apply(this,arguments)),hn(f,r(u))),u.result()}return l.area=function(f){return hn(f,r(un)),un.result()},l.measure=function(f){return hn(f,r(Nn)),Nn.result()},l.bounds=function(f){return hn(f,r(Xn)),Xn.result()},l.centroid=function(f){return hn(f,r(j)),j.result()},l.projection=function(f){return arguments.length?(r=f==null?(n=null,ct):(n=f).stream,l):n},l.context=function(f){return arguments.length?(u=f==null?(t=null,new Bt(i)):new si(t=f),typeof e!="function"&&u.pointRadius(e),l):t},l.pointRadius=function(f){return arguments.length?(e=typeof f=="function"?f:(u.pointRadius(+f),+f),l):e},l.digits=function(f){if(!arguments.length)return i;if(f==null)i=null;else{const g=Math.floor(f);if(!(g>=0))throw new RangeError(`invalid digits: ${f}`);i=g}return t===null&&(u=new Bt(i)),l},l.projection(n).digits(i).context(t)}function wt(n){return function(t){var i=new Et;for(var e in n)i[e]=n[e];return i.stream=t,i}}function Et(){}Et.prototype={constructor:Et,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Mt(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),hn(i,n.stream(Xn)),t(Xn.result()),e!=null&&n.clipExtent(e),n}function gi(n,t,i){return Mt(n,function(e){var r=t[1][0]-t[0][0],u=t[1][1]-t[0][1],l=Math.min(r/(e[1][0]-e[0][0]),u/(e[1][1]-e[0][1])),f=+t[0][0]+(r-l*(e[1][0]+e[0][0]))/2,g=+t[0][1]+(u-l*(e[1][1]+e[0][1]))/2;n.scale(150*l).translate([f,g])},i)}function ae(n,t,i){return gi(n,[[0,0],t],i)}function le(n,t,i){return Mt(n,function(e){var r=+t,u=r/(e[1][0]-e[0][0]),l=(r-u*(e[1][0]+e[0][0]))/2,f=-u*e[0][1];n.scale(150*u).translate([l,f])},i)}function fe(n,t,i){return Mt(n,function(e){var r=+t,u=r/(e[1][1]-e[0][1]),l=-u*e[0][0],f=(r-u*(e[1][1]+e[0][1]))/2;n.scale(150*u).translate([l,f])},i)}var Ut=16,se=C(30*O);function Jt(n,t){return+t?pe(n,t):ce(n)}function ce(n){return wt({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function pe(n,t){function i(e,r,u,l,f,g,v,o,a,s,p,h,P,m){var N=v-e,E=o-r,y=N*N+E*E;if(y>4*t&&P--){var S=l+s,R=f+p,d=g+h,M=cn(S*S+R*R+d*d),_=Pn(d/=M),w=L(L(d)-1)<z||L(u-a)<z?(u+a)/2:xn(R,S),Y=n(w,_),x=Y[0],W=Y[1],k=x-e,A=W-r,c=E*k-N*A;(c*c/y>t||L((N*k+E*A)/y-.5)>.3||l*s+f*p+g*h<se)&&(i(e,r,u,l,f,g,x,W,w,S/=M,R/=M,d,P,m),m.point(x,W),i(x,W,w,S,R,d,v,o,a,s,p,h,P,m))}}return function(e){var r,u,l,f,g,v,o,a,s,p,h,P,m={point:N,lineStart:E,lineEnd:S,polygonStart:function(){e.polygonStart(),m.lineStart=R},polygonEnd:function(){e.polygonEnd(),m.lineStart=E}};function N(_,w){_=n(_,w),e.point(_[0],_[1])}function E(){a=NaN,m.point=y,e.lineStart()}function y(_,w){var Y=dn([_,w]),x=n(_,w);i(a,s,o,p,h,P,a=x[0],s=x[1],o=_,p=Y[0],h=Y[1],P=Y[2],Ut,e),e.point(a,s)}function S(){m.point=N,e.lineEnd()}function R(){E(),m.point=d,m.lineEnd=M}function d(_,w){y(r=_,w),u=a,l=s,f=p,g=h,v=P,m.point=y}function M(){i(a,s,o,p,h,P,u,l,r,f,g,v,Ut,e),m.lineEnd=S,S()}return m}}var he=wt({point:function(n,t){this.stream.point(n*O,t*O)}});function ve(n){return wt({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function ge(n,t,i,e,r){function u(l,f){return l*=e,f*=r,[t+n*l,i-n*f]}return u.invert=function(l,f){return[(l-t)/n*e,(i-f)/n*r]},u}function Qt(n,t,i,e,r,u){if(!u)return ge(n,t,i,e,r);var l=C(u),f=F(u),g=l*n,v=f*n,o=l/n,a=f/n,s=(f*i-l*t)/n,p=(f*t+l*i)/n;function h(P,m){return P*=e,m*=r,[g*P-v*m+t,i-v*P-g*m]}return h.invert=function(P,m){return[e*(o*P-a*m+s),r*(p-a*P-o*m)]},h}function de(n){return me(function(){return n})()}function me(n){var t,i=150,e=480,r=250,u=0,l=0,f=0,g=0,v=0,o,a=0,s=1,p=1,h=null,P=Wt,m=null,N,E,y,S=ct,R=.5,d,M,_,w,Y;function x(c){return _(c[0]*O,c[1]*O)}function W(c){return c=_.invert(c[0],c[1]),c&&[c[0]*U,c[1]*U]}x.stream=function(c){return w&&Y===c?w:w=he(ve(o)(P(d(S(Y=c)))))},x.preclip=function(c){return arguments.length?(P=c,h=void 0,A()):P},x.postclip=function(c){return arguments.length?(S=c,m=N=E=y=null,A()):S},x.clipAngle=function(c){return arguments.length?(P=+c?Bi(h=c*O):(h=null,Wt),A()):h*U},x.clipExtent=function(c){return arguments.length?(S=c==null?(m=N=E=y=null,ct):Ji(m=+c[0][0],N=+c[0][1],E=+c[1][0],y=+c[1][1]),A()):m==null?null:[[m,N],[E,y]]},x.scale=function(c){return arguments.length?(i=+c,k()):i},x.translate=function(c){return arguments.length?(e=+c[0],r=+c[1],k()):[e,r]},x.center=function(c){return arguments.length?(u=c[0]%360*O,l=c[1]%360*O,k()):[u*U,l*U]},x.rotate=function(c){return arguments.length?(f=c[0]%360*O,g=c[1]%360*O,v=c.length>2?c[2]%360*O:0,k()):[f*U,g*U,v*U]},x.angle=function(c){return arguments.length?(a=c%360*O,k()):a*U},x.reflectX=function(c){return arguments.length?(s=c?-1:1,k()):s<0},x.reflectY=function(c){return arguments.length?(p=c?-1:1,k()):p<0},x.precision=function(c){return arguments.length?(d=Jt(M,R=c*c),A()):cn(R)},x.fitExtent=function(c,D){return gi(x,c,D)},x.fitSize=function(c,D){return ae(x,c,D)},x.fitWidth=function(c,D){return le(x,c,D)},x.fitHeight=function(c,D){return fe(x,c,D)};function k(){var c=Qt(i,0,0,s,p,a).apply(null,t(u,l)),D=Qt(i,e-c[0],r-c[1],s,p,a);return o=ni(f,g,v),M=ft(t,D),_=ft(o,M),d=Jt(M,R),A()}function A(){return w=Y=null,x}return function(){return t=n.apply(this,arguments),x.invert=t.invert&&W,k()}}function yt(n,t){return[n,ki(Ci((X+t)/2))]}yt.invert=function(n,t){return[n,2*bt(zi(t))-X]};function Se(){return _e(yt).scale(961/V)}function _e(n){var t=de(n),i=t.center,e=t.scale,r=t.translate,u=t.clipExtent,l=null,f,g,v;t.scale=function(a){return arguments.length?(e(a),o()):e()},t.translate=function(a){return arguments.length?(r(a),o()):r()},t.center=function(a){return arguments.length?(i(a),o()):i()},t.clipExtent=function(a){return arguments.length?(a==null?l=f=g=v=null:(l=+a[0][0],f=+a[0][1],g=+a[1][0],v=+a[1][1]),o()):l==null?null:[[l,f],[g,v]]};function o(){var a=I*e(),s=t(Oi(t.rotate()).invert([0,0]));return u(l==null?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:n===yt?[[Math.max(s[0]-a,l),f],[Math.min(s[0]+a,g),v]]:[[l,Math.max(s[1]-a,f)],[g,Math.min(s[1]+a,v)]])}return o()}function di(){var n=[.5],t=[0,1],i,e=1;function r(u){return u!=null&&u<=u?t[Ri(n,u,0,e)]:i}return r.domain=function(u){return arguments.length?(n=Array.from(u),e=Math.min(n.length,t.length-1),r):n.slice()},r.range=function(u){return arguments.length?(t=Array.from(u),e=Math.min(n.length,t.length-1),r):t.slice()},r.invertExtent=function(u){var l=t.indexOf(u);return[n[l-1],n[l]]},r.unknown=function(u){return arguments.length?(i=u,r):i},r.copy=function(){return di().domain(n).range(t).unknown(i)},Pi.apply(r,arguments)}const Ee=!0,Le=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ee},Symbol.toStringTag,{value:"Module"}));var we=Vn('<path class="ct svelte-37edv5"></path>'),Me=Vn('<rect class="box svelte-37edv5" width="40" height="12" y="30"></rect>'),ye=Vn('<text class="label legend svelte-37edv5" y="55" text-anchor="middle"> </text>'),xe=Vn('<text class="label legend svelte-37edv5" x="100" text-anchor="end"><!></text><rect class="bar" height="8" x="104" style="fill: #6D247A; stroke: white;"></rect><text class="label legend svelte-37edv5" text-anchor="start"> </text>',1),Pe=Vt('<div class="map-inner-container svelte-37edv5"><svg><defs><pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4"><path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" stroke="#cccccc" stroke-width="1"></path></pattern></defs><text class="label svelte-37edv5" x="5" y="22"> </text><!><!><!></svg> <svg height="78"><text class="label svelte-37edv5" x="5" text-anchor="start">Mean distance to Toronto city center:</text><!></svg></div>');function On(n,t){Mi(t,!0);const i=Ni.pct_imm.concat(["#002b36"]),e={1961:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:14.85,notImmDist:19.51,popDist:17.98},1981:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:23.62,notImmDist:31.35,popDist:28.61},2001:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:26.68,notImmDist:35.81,popDist:32.01},2021:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:31.58,notImmDist:36.18,popDist:34.15}};let r=Nt(null),u=Nt(null),l=Yn(()=>B(u)),f=Yn(()=>B(l)/1.55),g=Yn(()=>Se().center([-79.4,43.7]).scale([B(l)*30]).translate([B(l)/2-50,B(f)/2+110]).angle([-30])),v=Yn(()=>ue(B(g)));di().domain(e[t.curYear].breaks).range(i);function o(d){return d===null?"url(#diagonalHatch)":d<10?i[0]:d<20?i[1]:d<30?i[2]:d<40?i[3]:d<50?i[4]:d<60?i[5]:d<70?i[6]:i[7]}function a(){const d=`/gta-immigration/data/immigration/imm_stats_${t.curYear}.geojson`;fetch(d).then(M=>M.json()).then(M=>{M.features=M.features.map((_,w)=>(_.id||(_.id=w),_)),M.features=M.features.map(_=>(_.properties.colour=o(_.properties.pct_imm),_)),Dt(r,M.features)})}Ii(()=>{a()});var s=Pe(),p=J(s),h=K(J(p)),P=J(h,!0);Q(h);var m=K(h);An(m,17,()=>B(r),Tn,(d,M)=>{var _=we();_n(w=>{q(_,"d",w),q(_,"fill",B(M).properties.colour)},[()=>B(v)(B(M))]),tn(d,_)});var N=K(m);An(N,17,()=>i,Tn,(d,M,_)=>{var w=Me();q(w,"x",5+_*40),_n(()=>q(w,"style",`fill:${i[_]??""}; stroke: white;`)),tn(d,w)});var E=K(N);An(E,17,()=>e[t.curYear].breaks,Tn,(d,M,_)=>{var w=ye();q(w,"x",5+(_+1)*40);var Y=J(w,!0);Q(w),_n(()=>nt(Y,e[t.curYear].breaks[_]+e[t.curYear].breakSuffix)),tn(d,w)}),Q(p);var y=K(p,2),S=J(y);q(S,"y",12);var R=K(S);An(R,16,()=>["immDist","notImmDist","popDist"],Tn,(d,M,_)=>{var w=xe(),Y=It(w);q(Y,"y",30+_*18);var x=J(Y);{var W=T=>{var H=bn("Immigrants");tn(T,H)},k=T=>{var H=_i(),G=It(H);{var ln=$=>{var Z=bn("Non-immigrants");tn($,Z)},nn=$=>{var Z=bn("Total pop.");tn($,Z)};Yt(G,$=>{M=="notImmDist"?$(ln):$(nn,!1)},!0)}tn(T,H)};Yt(x,T=>{M=="immDist"?T(W):T(k,!1)})}Q(Y);var A=K(Y);q(A,"y",22+_*18);var c=K(A);q(c,"y",30+_*18);var D=J(c);Q(c),_n(()=>{q(A,"width",200*e[t.curYear][M]/40),q(c,"x",107+200*e[t.curYear][M]/40),nt(D,`${e[t.curYear][M]??""} km`)}),tn(d,w)}),Q(y),Q(s),_n(()=>{q(p,"width",B(l)),q(p,"height",B(f)),q(p,"id",t.curYear),nt(P,e[t.curYear].name),q(y,"width",B(l))}),Ai(s,"offsetWidth",d=>Dt(u,d)),tn(n,s),yi()}var Re=Vt(`<main><!> <div class="title"><h1>Changes in Immigrant Settlement Patterns in the Greater Toronto Area</h1> <p>Aniket Kali,
            Serene Tan,
            Jeff Allen <br> <br> April 2025</p></div> <div class="text"><p>introduction...</p></div> <div class="map-grid svelte-1ng7glt"><div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div></div> <div class="text"><h2>How do immigrants compare to the general population?</h2> <p>information...</p></div> <div class="text"><p>explanation...</p> <p>conclusion...</p></div> <div class="text"><h2>Data & Methods</h2> <p>information...</p></div></main>`);function Ce(n){var t=Re(),i=J(t);Di(i);var e=K(i,6),r=J(e),u=J(r);On(u,{curYear:1961}),Q(r);var l=K(r,2),f=J(l);On(f,{curYear:1981}),Q(l);var g=K(l,2),v=J(g);On(v,{curYear:2001}),Q(g);var o=K(g,2),a=J(o);On(a,{curYear:2021}),Q(o),Q(e),xi(6),Q(t),tn(n,t)}export{Ce as component,Le as universal};
