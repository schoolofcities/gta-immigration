import{t as Ft,a as tn,n as qn,d as Bn,c as ei}from"../chunks/CjbboRqQ.js";import"../chunks/PTH_wyg2.js";import{F as ri,G as gn,I as oi,L as K,J as U,Q as vt,K as Q,g as Z,as as gt,f as Rn,B as dt,C as ui}from"../chunks/CAmXmMGl.js";import{i as ai,b as li,C as fi,e as xn,s as W,a as ci,c as Nn,T as si}from"../chunks/CLojlQzb.js";import{s as Xn}from"../chunks/Ddz4xWBD.js";import{i as mt}from"../chunks/CaLsIMer.js";import{o as pi}from"../chunks/BlvXtfgQ.js";class an{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const u=e[r],l=t+u,f=Math.abs(t)<Math.abs(u)?t-(l-u):u-(l-t);f&&(e[i++]=f),t=l}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,u,l=0;if(e>0){for(l=t[--e];e>0&&(i=l,r=t[--e],l=i+r,u=r-(l-i),!u););e>0&&(u<0&&t[e-1]<0||u>0&&t[e-1]>0)&&(r=u*2,i=l+r,r==i-l&&(l=i))}return l}}function*hi(n){for(const t of n)yield*t}function Ot(n){return Array.from(hi(n))}var L=1e-6,D=Math.PI,B=D/2,St=D/4,V=D*2,J=180/D,O=D/180,C=Math.abs,Ht=Math.atan,En=Math.atan2,k=Math.cos,vi=Math.exp,gi=Math.log,F=Math.sin,di=Math.sign||function(n){return n>0?1:n<0?-1:0},fn=Math.sqrt,mi=Math.tan;function Si(n){return n>1?0:n<-1?D:Math.acos(n)}function wn(n){return n>1?B:n<-1?-B:Math.asin(n)}function b(){}function Cn(n,t){n&&Et.hasOwnProperty(n.type)&&Et[n.type](n,t)}var _t={Feature:function(n,t){Cn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)Cn(e[i].geometry,t)}},Et={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Vn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Vn(e[i],t,0)},Polygon:function(n,t){wt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)wt(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)Cn(e[i],t)}};function Vn(n,t,e){var i=-1,r=n.length-e,u;for(t.lineStart();++i<r;)u=n[i],t.point(u[0],u[1],u[2]);t.lineEnd()}function wt(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Vn(n[e],t,1);t.polygonEnd()}function sn(n,t){n&&_t.hasOwnProperty(n.type)?_t[n.type](n,t):Cn(n,t)}function Kn(n){return[En(n[1],n[0]),wn(n[2])]}function hn(n){var t=n[0],e=n[1],i=k(e);return[i*k(t),i*F(t),F(e)]}function In(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function kn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Zn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Dn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function jn(n){var t=fn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function bn(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function nt(n,t){return C(n)>D&&(n-=Math.round(n/V)*V),[n,t]}nt.invert=nt;function Gt(n,t,e){return(n%=V)?t||e?bn(Mt(n),Pt(t,e)):Mt(n):t||e?Pt(t,e):nt}function yt(n){return function(t,e){return t+=n,C(t)>D&&(t-=Math.round(t/V)*V),[t,e]}}function Mt(n){var t=yt(n);return t.invert=yt(-n),t}function Pt(n,t){var e=k(n),i=F(n),r=k(t),u=F(t);function l(f,g){var v=k(g),o=k(f)*v,a=F(f)*v,c=F(g),p=c*e+o*i;return[En(a*r-p*u,o*e-c*i),wn(p*r+a*u)]}return l.invert=function(f,g){var v=k(g),o=k(f)*v,a=F(f)*v,c=F(g),p=c*r-a*u;return[En(a*r+c*u,o*e+p*i),wn(p*e-o*i)]},l}function _i(n){n=Gt(n[0]*O,n[1]*O,n.length>2?n[2]*O:0);function t(e){return e=n(e[0]*O,e[1]*O),e[0]*=J,e[1]*=J,e}return t.invert=function(e){return e=n.invert(e[0]*O,e[1]*O),e[0]*=J,e[1]*=J,e},t}function Ei(n,t,e,i,r,u){if(e){var l=k(t),f=F(t),g=i*e;r==null?(r=t+i*V,u=t-g/2):(r=Rt(l,r),u=Rt(l,u),(i>0?r<u:r>u)&&(r+=i*V));for(var v,o=r;i>0?o>u:o<u;o-=g)v=Kn([l,-f*k(o),-f*F(o)]),n.point(v[0],v[1])}}function Rt(n,t){t=hn(t),t[0]-=n,jn(t);var e=Si(-t[1]);return((-t[2]<0?-e:e)+V-L)%V}function Wt(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:b,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function zn(n,t){return C(n[0]-t[0])<L&&C(n[1]-t[1])<L}function Yn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function $t(n,t,e,i,r){var u=[],l=[],f,g;if(n.forEach(function(h){if(!((R=h.length-1)<=0)){var R,m=h[0],N=h[R],E;if(zn(m,N)){if(!m[2]&&!N[2]){for(r.lineStart(),f=0;f<R;++f)r.point((m=h[f])[0],m[1]);r.lineEnd();return}N[0]+=2*L}u.push(E=new Yn(m,h,null,!0)),l.push(E.o=new Yn(m,null,E,!1)),u.push(E=new Yn(N,h,null,!1)),l.push(E.o=new Yn(N,null,E,!0))}}),!!u.length){for(l.sort(t),xt(u),xt(l),f=0,g=l.length;f<g;++f)l[f].e=e=!e;for(var v=u[0],o,a;;){for(var c=v,p=!0;c.v;)if((c=c.n)===v)return;o=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(p)for(f=0,g=o.length;f<g;++f)r.point((a=o[f])[0],a[1]);else i(c.x,c.n.x,1,r);c=c.n}else{if(p)for(o=c.p.z,f=o.length-1;f>=0;--f)r.point((a=o[f])[0],a[1]);else i(c.x,c.p.x,-1,r);c=c.p}c=c.o,o=c.z,p=!p}while(!c.v);r.lineEnd()}}}function xt(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Jn(n){return C(n[0])<=D?n[0]:di(n[0])*((C(n[0])+D)%V-D)}function wi(n,t){var e=Jn(t),i=t[1],r=F(i),u=[F(e),-k(e),0],l=0,f=0,g=new an;r===1?i=B+L:r===-1&&(i=-B-L);for(var v=0,o=n.length;v<o;++v)if(c=(a=n[v]).length)for(var a,c,p=a[c-1],h=Jn(p),R=p[1]/2+St,m=F(R),N=k(R),E=0;E<c;++E,h=S,m=d,N=y,p=M){var M=a[E],S=Jn(M),x=M[1]/2+St,d=F(x),y=k(x),_=S-h,w=_>=0?1:-1,Y=w*_,P=Y>D,G=m*d;if(g.add(En(G*w*F(Y),N*y+G*k(Y))),l+=P?_+w*V:_,P^h>=e^S>=e){var z=kn(hn(p),hn(M));jn(z);var A=kn(u,z);jn(A);var s=(P^_>=0?-1:1)*wn(A[2]);(i>s||i===s&&(z[0]||z[1]))&&(f+=P^_>=0?1:-1)}}return(l<-1e-6||l<L&&g<-1e-12)^f&1}function qt(n,t,e,i){return function(r){var u=t(r),l=Wt(),f=t(l),g=!1,v,o,a,c={point:p,lineStart:R,lineEnd:m,polygonStart:function(){c.point=N,c.lineStart=E,c.lineEnd=M,o=[],v=[]},polygonEnd:function(){c.point=p,c.lineStart=R,c.lineEnd=m,o=Ot(o);var S=wi(v,i);o.length?(g||(r.polygonStart(),g=!0),$t(o,Mi,S,e,r)):S&&(g||(r.polygonStart(),g=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),o=v=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(S,x){n(S,x)&&r.point(S,x)}function h(S,x){u.point(S,x)}function R(){c.point=h,u.lineStart()}function m(){c.point=p,u.lineEnd()}function N(S,x){a.push([S,x]),f.point(S,x)}function E(){f.lineStart(),a=[]}function M(){N(a[0][0],a[0][1]),f.lineEnd();var S=f.clean(),x=l.result(),d,y=x.length,_,w,Y;if(a.pop(),v.push(a),a=null,!!y){if(S&1){if(w=x[0],(_=w.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),d=0;d<_;++d)r.point((Y=w[d])[0],Y[1]);r.lineEnd()}return}y>1&&S&2&&x.push(x.pop().concat(x.shift())),o.push(x.filter(yi))}}return c}}function yi(n){return n.length>1}function Mi(n,t){return((n=n.x)[0]<0?n[1]-B-L:B-n[1])-((t=t.x)[0]<0?t[1]-B-L:B-t[1])}const Nt=qt(function(){return!0},Pi,xi,[-D,-B]);function Pi(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(u,l){var f=u>0?D:-D,g=C(u-t);C(g-D)<L?(n.point(t,e=(e+l)/2>0?B:-B),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),n.point(u,e),r=0):i!==f&&g>=D&&(C(t-i)<L&&(t-=i*L),C(u-f)<L&&(u-=f*L),e=Ri(t,e,u,l),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),r=0),n.point(t=u,e=l),i=f},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function Ri(n,t,e,i){var r,u,l=F(n-e);return C(l)>L?Ht((F(t)*(u=k(i))*F(e)-F(i)*(r=k(t))*F(n))/(r*u*l)):(t+i)/2}function xi(n,t,e,i){var r;if(n==null)r=e*B,i.point(-D,r),i.point(0,r),i.point(D,r),i.point(D,0),i.point(D,-r),i.point(0,-r),i.point(-D,-r),i.point(-D,0),i.point(-D,r);else if(C(n[0]-t[0])>L){var u=n[0]<t[0]?D:-D;r=e*u/2,i.point(-u,r),i.point(0,r),i.point(u,r)}else i.point(t[0],t[1])}function Ni(n){var t=k(n),e=2*O,i=t>0,r=C(t)>L;function u(o,a,c,p){Ei(p,n,e,c,o,a)}function l(o,a){return k(o)*k(a)>t}function f(o){var a,c,p,h,R;return{lineStart:function(){h=p=!1,R=1},point:function(m,N){var E=[m,N],M,S=l(m,N),x=i?S?0:v(m,N):S?v(m+(m<0?D:-D),N):0;if(!a&&(h=p=S)&&o.lineStart(),S!==p&&(M=g(a,E),(!M||zn(a,M)||zn(E,M))&&(E[2]=1)),S!==p)R=0,S?(o.lineStart(),M=g(E,a),o.point(M[0],M[1])):(M=g(a,E),o.point(M[0],M[1],2),o.lineEnd()),a=M;else if(r&&a&&i^S){var d;!(x&c)&&(d=g(E,a,!0))&&(R=0,i?(o.lineStart(),o.point(d[0][0],d[0][1]),o.point(d[1][0],d[1][1]),o.lineEnd()):(o.point(d[1][0],d[1][1]),o.lineEnd(),o.lineStart(),o.point(d[0][0],d[0][1],3)))}S&&(!a||!zn(a,E))&&o.point(E[0],E[1]),a=E,p=S,c=x},lineEnd:function(){p&&o.lineEnd(),a=null},clean:function(){return R|(h&&p)<<1}}}function g(o,a,c){var p=hn(o),h=hn(a),R=[1,0,0],m=kn(p,h),N=In(m,m),E=m[0],M=N-E*E;if(!M)return!c&&o;var S=t*N/M,x=-t*E/M,d=kn(R,m),y=Dn(R,S),_=Dn(m,x);Zn(y,_);var w=d,Y=In(y,w),P=In(w,w),G=Y*Y-P*(In(y,y)-1);if(!(G<0)){var z=fn(G),A=Dn(w,(-Y-z)/P);if(Zn(A,y),A=Kn(A),!c)return A;var s=o[0],I=a[0],T=o[1],H=a[1],$;I<s&&($=s,s=I,I=$);var un=I-s,nn=C(un-D)<L,q=nn||un<L;if(!nn&&H<T&&($=T,T=H,H=$),q?nn?T+H>0^A[1]<(C(A[0]-s)<L?T:H):T<=A[1]&&A[1]<=H:un>D^(s<=A[0]&&A[0]<=I)){var X=Dn(w,(-Y+z)/P);return Zn(X,y),[A,Kn(X)]}}}function v(o,a){var c=i?n:D-n,p=0;return o<-c?p|=1:o>c&&(p|=2),a<-c?p|=4:a>c&&(p|=8),p}return qt(l,f,u,i?[0,-n]:[-D,n-D])}function Ii(n,t,e,i,r,u){var l=n[0],f=n[1],g=t[0],v=t[1],o=0,a=1,c=g-l,p=v-f,h;if(h=e-l,!(!c&&h>0)){if(h/=c,c<0){if(h<o)return;h<a&&(a=h)}else if(c>0){if(h>a)return;h>o&&(o=h)}if(h=r-l,!(!c&&h<0)){if(h/=c,c<0){if(h>a)return;h>o&&(o=h)}else if(c>0){if(h<o)return;h<a&&(a=h)}if(h=i-f,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<a&&(a=h)}else if(p>0){if(h>a)return;h>o&&(o=h)}if(h=u-f,!(!p&&h<0)){if(h/=p,p<0){if(h>a)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<a&&(a=h)}return o>0&&(n[0]=l+o*c,n[1]=f+o*p),a<1&&(t[0]=l+a*c,t[1]=f+a*p),!0}}}}}var An=1e9,Tn=-1e9;function Di(n,t,e,i){function r(v,o){return n<=v&&v<=e&&t<=o&&o<=i}function u(v,o,a,c){var p=0,h=0;if(v==null||(p=l(v,a))!==(h=l(o,a))||g(v,o)<0^a>0)do c.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+a+4)%4)!==h);else c.point(o[0],o[1])}function l(v,o){return C(v[0]-n)<L?o>0?0:3:C(v[0]-e)<L?o>0?2:1:C(v[1]-t)<L?o>0?1:0:o>0?3:2}function f(v,o){return g(v.x,o.x)}function g(v,o){var a=l(v,1),c=l(o,1);return a!==c?a-c:a===0?o[1]-v[1]:a===1?v[0]-o[0]:a===2?v[1]-o[1]:o[0]-v[0]}return function(v){var o=v,a=Wt(),c,p,h,R,m,N,E,M,S,x,d,y={point:_,lineStart:G,lineEnd:z,polygonStart:Y,polygonEnd:P};function _(s,I){r(s,I)&&o.point(s,I)}function w(){for(var s=0,I=0,T=p.length;I<T;++I)for(var H=p[I],$=1,un=H.length,nn=H[0],q,X,Pn=nn[0],cn=nn[1];$<un;++$)q=Pn,X=cn,nn=H[$],Pn=nn[0],cn=nn[1],X<=i?cn>i&&(Pn-q)*(i-X)>(cn-X)*(n-q)&&++s:cn<=i&&(Pn-q)*(i-X)<(cn-X)*(n-q)&&--s;return s}function Y(){o=a,c=[],p=[],d=!0}function P(){var s=w(),I=d&&s,T=(c=Ot(c)).length;(I||T)&&(v.polygonStart(),I&&(v.lineStart(),u(null,null,1,v),v.lineEnd()),T&&$t(c,f,s,u,v),v.polygonEnd()),o=v,c=p=h=null}function G(){y.point=A,p&&p.push(h=[]),x=!0,S=!1,E=M=NaN}function z(){c&&(A(R,m),N&&S&&a.rejoin(),c.push(a.result())),y.point=_,S&&o.lineEnd()}function A(s,I){var T=r(s,I);if(p&&h.push([s,I]),x)R=s,m=I,N=T,x=!1,T&&(o.lineStart(),o.point(s,I));else if(T&&S)o.point(s,I);else{var H=[E=Math.max(Tn,Math.min(An,E)),M=Math.max(Tn,Math.min(An,M))],$=[s=Math.max(Tn,Math.min(An,s)),I=Math.max(Tn,Math.min(An,I))];Ii(H,$,n,t,e,i)?(S||(o.lineStart(),o.point(H[0],H[1])),o.point($[0],$[1]),T||o.lineEnd(),d=!1):T&&(o.lineStart(),o.point(s,I),d=!1)}E=s,M=I,S=T}return y}}const tt=n=>n;var Un=new an,it=new an,Bt,Xt,et,rt,on={point:b,lineStart:b,lineEnd:b,polygonStart:function(){on.lineStart=Yi,on.lineEnd=Ti},polygonEnd:function(){on.lineStart=on.lineEnd=on.point=b,Un.add(C(it)),it=new an},result:function(){var n=Un/2;return Un=new an,n}};function Yi(){on.point=Ai}function Ai(n,t){on.point=Zt,Bt=et=n,Xt=rt=t}function Zt(n,t){it.add(rt*n-et*t),et=n,rt=t}function Ti(){Zt(Bt,Xt)}var vn=1/0,Fn=vn,yn=-vn,On=yn,Hn={point:Li,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b,result:function(){var n=[[vn,Fn],[yn,On]];return yn=On=-(Fn=vn=1/0),n}};function Li(n,t){n<vn&&(vn=n),n>yn&&(yn=n),t<Fn&&(Fn=t),t>On&&(On=t)}var ot=0,ut=0,dn=0,Gn=0,Wn=0,pn=0,at=0,lt=0,mn=0,Jt,Ut,en,rn,j={point:ln,lineStart:It,lineEnd:Dt,polygonStart:function(){j.lineStart=ki,j.lineEnd=Fi},polygonEnd:function(){j.point=ln,j.lineStart=It,j.lineEnd=Dt},result:function(){var n=mn?[at/mn,lt/mn]:pn?[Gn/pn,Wn/pn]:dn?[ot/dn,ut/dn]:[NaN,NaN];return ot=ut=dn=Gn=Wn=pn=at=lt=mn=0,n}};function ln(n,t){ot+=n,ut+=t,++dn}function It(){j.point=zi}function zi(n,t){j.point=Ci,ln(en=n,rn=t)}function Ci(n,t){var e=n-en,i=t-rn,r=fn(e*e+i*i);Gn+=r*(en+n)/2,Wn+=r*(rn+t)/2,pn+=r,ln(en=n,rn=t)}function Dt(){j.point=ln}function ki(){j.point=Oi}function Fi(){Qt(Jt,Ut)}function Oi(n,t){j.point=Qt,ln(Jt=en=n,Ut=rn=t)}function Qt(n,t){var e=n-en,i=t-rn,r=fn(e*e+i*i);Gn+=r*(en+n)/2,Wn+=r*(rn+t)/2,pn+=r,r=rn*n-en*t,at+=r*(en+n),lt+=r*(rn+t),mn+=r*3,ln(en=n,rn=t)}function Vt(n){this._context=n}Vt.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,V);break}}},result:b};var ft=new an,Qn,Kt,jt,Sn,_n,Mn={point:b,lineStart:function(){Mn.point=Hi},lineEnd:function(){Qn&&bt(Kt,jt),Mn.point=b},polygonStart:function(){Qn=!0},polygonEnd:function(){Qn=null},result:function(){var n=+ft;return ft=new an,n}};function Hi(n,t){Mn.point=bt,Kt=Sn=n,jt=_n=t}function bt(n,t){Sn-=n,_n-=t,ft.add(fn(Sn*Sn+_n*_n)),Sn=n,_n=t}let Yt,$n,At,Tt;class Lt{constructor(t){this._append=t==null?ni:Gi(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==At||this._append!==$n){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,At=i,$n=this._append,Tt=this._,this._=r}this._+=Tt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function ni(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function Gi(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return ni;if(t!==Yt){const e=10**t;Yt=t,$n=function(r){let u=1;this._+=r[0];for(const l=r.length;u<l;++u)this._+=Math.round(arguments[u]*e)/e+r[u]}}return $n}function Wi(n,t){let e=3,i=4.5,r,u;function l(f){return f&&(typeof i=="function"&&u.pointRadius(+i.apply(this,arguments)),sn(f,r(u))),u.result()}return l.area=function(f){return sn(f,r(on)),on.result()},l.measure=function(f){return sn(f,r(Mn)),Mn.result()},l.bounds=function(f){return sn(f,r(Hn)),Hn.result()},l.centroid=function(f){return sn(f,r(j)),j.result()},l.projection=function(f){return arguments.length?(r=f==null?(n=null,tt):(n=f).stream,l):n},l.context=function(f){return arguments.length?(u=f==null?(t=null,new Lt(e)):new Vt(t=f),typeof i!="function"&&u.pointRadius(i),l):t},l.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(u.pointRadius(+f),+f),l):i},l.digits=function(f){if(!arguments.length)return e;if(f==null)e=null;else{const g=Math.floor(f);if(!(g>=0))throw new RangeError(`invalid digits: ${f}`);e=g}return t===null&&(u=new Lt(e)),l},l.projection(n).digits(e).context(t)}function st(n){return function(t){var e=new ct;for(var i in n)e[i]=n[i];return e.stream=t,e}}function ct(){}ct.prototype={constructor:ct,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function pt(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),sn(e,n.stream(Hn)),t(Hn.result()),i!=null&&n.clipExtent(i),n}function ti(n,t,e){return pt(n,function(i){var r=t[1][0]-t[0][0],u=t[1][1]-t[0][1],l=Math.min(r/(i[1][0]-i[0][0]),u/(i[1][1]-i[0][1])),f=+t[0][0]+(r-l*(i[1][0]+i[0][0]))/2,g=+t[0][1]+(u-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([f,g])},e)}function $i(n,t,e){return ti(n,[[0,0],t],e)}function qi(n,t,e){return pt(n,function(i){var r=+t,u=r/(i[1][0]-i[0][0]),l=(r-u*(i[1][0]+i[0][0]))/2,f=-u*i[0][1];n.scale(150*u).translate([l,f])},e)}function Bi(n,t,e){return pt(n,function(i){var r=+t,u=r/(i[1][1]-i[0][1]),l=-u*i[0][0],f=(r-u*(i[1][1]+i[0][1]))/2;n.scale(150*u).translate([l,f])},e)}var zt=16,Xi=k(30*O);function Ct(n,t){return+t?Ji(n,t):Zi(n)}function Zi(n){return st({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Ji(n,t){function e(i,r,u,l,f,g,v,o,a,c,p,h,R,m){var N=v-i,E=o-r,M=N*N+E*E;if(M>4*t&&R--){var S=l+c,x=f+p,d=g+h,y=fn(S*S+x*x+d*d),_=wn(d/=y),w=C(C(d)-1)<L||C(u-a)<L?(u+a)/2:En(x,S),Y=n(w,_),P=Y[0],G=Y[1],z=P-i,A=G-r,s=E*z-N*A;(s*s/M>t||C((N*z+E*A)/M-.5)>.3||l*c+f*p+g*h<Xi)&&(e(i,r,u,l,f,g,P,G,w,S/=y,x/=y,d,R,m),m.point(P,G),e(P,G,w,S,x,d,v,o,a,c,p,h,R,m))}}return function(i){var r,u,l,f,g,v,o,a,c,p,h,R,m={point:N,lineStart:E,lineEnd:S,polygonStart:function(){i.polygonStart(),m.lineStart=x},polygonEnd:function(){i.polygonEnd(),m.lineStart=E}};function N(_,w){_=n(_,w),i.point(_[0],_[1])}function E(){a=NaN,m.point=M,i.lineStart()}function M(_,w){var Y=hn([_,w]),P=n(_,w);e(a,c,o,p,h,R,a=P[0],c=P[1],o=_,p=Y[0],h=Y[1],R=Y[2],zt,i),i.point(a,c)}function S(){m.point=N,i.lineEnd()}function x(){E(),m.point=d,m.lineEnd=y}function d(_,w){M(r=_,w),u=a,l=c,f=p,g=h,v=R,m.point=M}function y(){e(a,c,o,p,h,R,u,l,r,f,g,v,zt,i),m.lineEnd=S,S()}return m}}var Ui=st({point:function(n,t){this.stream.point(n*O,t*O)}});function Qi(n){return st({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function Vi(n,t,e,i,r){function u(l,f){return l*=i,f*=r,[t+n*l,e-n*f]}return u.invert=function(l,f){return[(l-t)/n*i,(e-f)/n*r]},u}function kt(n,t,e,i,r,u){if(!u)return Vi(n,t,e,i,r);var l=k(u),f=F(u),g=l*n,v=f*n,o=l/n,a=f/n,c=(f*e-l*t)/n,p=(f*t+l*e)/n;function h(R,m){return R*=i,m*=r,[g*R-v*m+t,e-v*R-g*m]}return h.invert=function(R,m){return[i*(o*R-a*m+c),r*(p-a*R-o*m)]},h}function Ki(n){return ji(function(){return n})()}function ji(n){var t,e=150,i=480,r=250,u=0,l=0,f=0,g=0,v=0,o,a=0,c=1,p=1,h=null,R=Nt,m=null,N,E,M,S=tt,x=.5,d,y,_,w,Y;function P(s){return _(s[0]*O,s[1]*O)}function G(s){return s=_.invert(s[0],s[1]),s&&[s[0]*J,s[1]*J]}P.stream=function(s){return w&&Y===s?w:w=Ui(Qi(o)(R(d(S(Y=s)))))},P.preclip=function(s){return arguments.length?(R=s,h=void 0,A()):R},P.postclip=function(s){return arguments.length?(S=s,m=N=E=M=null,A()):S},P.clipAngle=function(s){return arguments.length?(R=+s?Ni(h=s*O):(h=null,Nt),A()):h*J},P.clipExtent=function(s){return arguments.length?(S=s==null?(m=N=E=M=null,tt):Di(m=+s[0][0],N=+s[0][1],E=+s[1][0],M=+s[1][1]),A()):m==null?null:[[m,N],[E,M]]},P.scale=function(s){return arguments.length?(e=+s,z()):e},P.translate=function(s){return arguments.length?(i=+s[0],r=+s[1],z()):[i,r]},P.center=function(s){return arguments.length?(u=s[0]%360*O,l=s[1]%360*O,z()):[u*J,l*J]},P.rotate=function(s){return arguments.length?(f=s[0]%360*O,g=s[1]%360*O,v=s.length>2?s[2]%360*O:0,z()):[f*J,g*J,v*J]},P.angle=function(s){return arguments.length?(a=s%360*O,z()):a*J},P.reflectX=function(s){return arguments.length?(c=s?-1:1,z()):c<0},P.reflectY=function(s){return arguments.length?(p=s?-1:1,z()):p<0},P.precision=function(s){return arguments.length?(d=Ct(y,x=s*s),A()):fn(x)},P.fitExtent=function(s,I){return ti(P,s,I)},P.fitSize=function(s,I){return $i(P,s,I)},P.fitWidth=function(s,I){return qi(P,s,I)},P.fitHeight=function(s,I){return Bi(P,s,I)};function z(){var s=kt(e,0,0,c,p,a).apply(null,t(u,l)),I=kt(e,i-s[0],r-s[1],c,p,a);return o=Gt(f,g,v),y=bn(t,I),_=bn(o,y),d=Ct(y,x),A()}function A(){return w=Y=null,P}return function(){return t=n.apply(this,arguments),P.invert=t.invert&&G,z()}}function ht(n,t){return[n,gi(mi((B+t)/2))]}ht.invert=function(n,t){return[n,2*Ht(vi(t))-B]};function bi(){return ne(ht).scale(961/V)}function ne(n){var t=Ki(n),e=t.center,i=t.scale,r=t.translate,u=t.clipExtent,l=null,f,g,v;t.scale=function(a){return arguments.length?(i(a),o()):i()},t.translate=function(a){return arguments.length?(r(a),o()):r()},t.center=function(a){return arguments.length?(e(a),o()):e()},t.clipExtent=function(a){return arguments.length?(a==null?l=f=g=v=null:(l=+a[0][0],f=+a[0][1],g=+a[1][0],v=+a[1][1]),o()):l==null?null:[[l,f],[g,v]]};function o(){var a=D*i(),c=t(_i(t.rotate()).invert([0,0]));return u(l==null?[[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]]:n===ht?[[Math.max(c[0]-a,l),f],[Math.min(c[0]+a,g),v]]:[[l,Math.max(c[1]-a,f)],[g,Math.min(c[1]+a,v)]])}return o()}function ii(){var n=[.5],t=[0,1],e,i=1;function r(u){return u!=null&&u<=u?t[li(n,u,0,i)]:e}return r.domain=function(u){return arguments.length?(n=Array.from(u),i=Math.min(n.length,t.length-1),r):n.slice()},r.range=function(u){return arguments.length?(t=Array.from(u),i=Math.min(n.length,t.length-1),r):t.slice()},r.invertExtent=function(u){var l=t.indexOf(u);return[n[l-1],n[l]]},r.unknown=function(u){return arguments.length?(e=u,r):e},r.copy=function(){return ii().domain(n).range(t).unknown(e)},ai.apply(r,arguments)}const te=!0,ge=Object.freeze(Object.defineProperty({__proto__:null,prerender:te},Symbol.toStringTag,{value:"Module"}));var ie=qn('<path class="ct svelte-37edv5"></path>'),ee=qn('<rect class="box svelte-37edv5" width="40" height="12" y="30"></rect>'),re=qn('<text class="label legend svelte-37edv5" y="55" text-anchor="middle"> </text>'),oe=qn('<text class="label legend svelte-37edv5" x="100" text-anchor="end"><!></text><rect class="bar" height="8" x="104" style="fill: #6D247A; stroke: white;"></rect><text class="label legend svelte-37edv5" text-anchor="start"> </text>',1),ue=Ft('<div class="map-inner-container svelte-37edv5"><svg><defs><pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4"><path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" stroke="#cccccc" stroke-width="1"></path></pattern></defs><text class="label svelte-37edv5" x="5" y="22"> </text><!><!><!></svg> <svg height="78"><text class="label svelte-37edv5" x="5" text-anchor="start">Mean distance to Toronto city center:</text><!></svg></div>');function Ln(n,t){ri(t,!0);const e=fi.pct_imm.concat(["#002b36"]),i={1961:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:14.85,notImmDist:19.51,popDist:17.98},1981:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:23.62,notImmDist:31.35,popDist:28.61},2001:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:26.68,notImmDist:35.81,popDist:32.01},2021:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:31.58,notImmDist:36.18,popDist:34.15}};let r=gt(null),u=gt(null),l=Rn(()=>Z(u)),f=Rn(()=>Z(l)/1.55),g=Rn(()=>bi().center([-79.4,43.7]).scale([Z(l)*30]).translate([Z(l)/2-50,Z(f)/2+110]).angle([-30])),v=Rn(()=>Wi(Z(g)));ii().domain(i[t.curYear].breaks).range(e);function o(d){return d===null?"url(#diagonalHatch)":d<10?e[0]:d<20?e[1]:d<30?e[2]:d<40?e[3]:d<50?e[4]:d<60?e[5]:d<70?e[6]:e[7]}function a(){const d=`/gta-immigration/data/immigration/imm_stats_${t.curYear}.geojson`;fetch(d).then(y=>y.json()).then(y=>{y.features=y.features.map((_,w)=>(_.id||(_.id=w),_)),y.features=y.features.map(_=>(_.properties.colour=o(_.properties.pct_imm),_)),vt(r,y.features)})}pi(()=>{a()});var c=ue(),p=U(c),h=K(U(p)),R=U(h,!0);Q(h);var m=K(h);xn(m,17,()=>Z(r),Nn,(d,y)=>{var _=ie();gn(w=>{W(_,"d",w),W(_,"fill",Z(y).properties.colour)},[()=>Z(v)(Z(y))]),tn(d,_)});var N=K(m);xn(N,17,()=>e,Nn,(d,y,_)=>{var w=ee();W(w,"x",5+_*40),gn(()=>W(w,"style",`fill:${e[_]??""}; stroke: white;`)),tn(d,w)});var E=K(N);xn(E,17,()=>i[t.curYear].breaks,Nn,(d,y,_)=>{var w=re();W(w,"x",5+(_+1)*40);var Y=U(w,!0);Q(w),gn(()=>Xn(Y,i[t.curYear].breaks[_]+i[t.curYear].breakSuffix)),tn(d,w)}),Q(p);var M=K(p,2),S=U(M);W(S,"y",12);var x=K(S);xn(x,16,()=>["immDist","notImmDist","popDist"],Nn,(d,y,_)=>{var w=oe(),Y=dt(w);W(Y,"y",30+_*18);var P=U(Y);{var G=T=>{var H=Bn("Immigrants");tn(T,H)},z=T=>{var H=ei(),$=dt(H);{var un=q=>{var X=Bn("Non-immigrants");tn(q,X)},nn=q=>{var X=Bn("Total pop.");tn(q,X)};mt($,q=>{y=="notImmDist"?q(un):q(nn,!1)},!0)}tn(T,H)};mt(P,T=>{y=="immDist"?T(G):T(z,!1)})}Q(Y);var A=K(Y);W(A,"y",22+_*18);var s=K(A);W(s,"y",30+_*18);var I=U(s);Q(s),gn(()=>{W(A,"width",200*i[t.curYear][y]/40),W(s,"x",107+200*i[t.curYear][y]/40),Xn(I,`${i[t.curYear][y]??""} km`)}),tn(d,w)}),Q(M),Q(c),gn(()=>{W(p,"width",Z(l)),W(p,"height",Z(f)),W(p,"id",t.curYear),Xn(R,i[t.curYear].name),W(M,"width",Z(l))}),ci(c,"offsetWidth",d=>vt(u,d)),tn(n,c),oi()}var ae=Ft(`<main><!> <div class="title"><h1>Changes in Immigrant Settlement Patterns in the Greater Toronto Area</h1> <p>Aniket Kali,
            Serene Tan,
            Jeff Allen <br> <br> April 2025</p></div> <div class="text"><p>introduction...</p></div> <div class="map-grid svelte-1ng7glt"><div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div></div> <div class="text"><h2>How do immigrants compare to the general population?</h2> <p>information...</p></div> <div class="text"><p>explanation...</p> <p>conclusion...</p></div> <div class="text"><h2>Data & Methods</h2> <p>information...</p></div></main>`);function de(n){var t=ae(),e=U(t);si(e,{});var i=K(e,6),r=U(i),u=U(r);Ln(u,{curYear:1961}),Q(r);var l=K(r,2),f=U(l);Ln(f,{curYear:1981}),Q(l);var g=K(l,2),v=U(g);Ln(v,{curYear:2001}),Q(g);var o=K(g,2),a=U(o);Ln(a,{curYear:2021}),Q(o),Q(i),ui(6),Q(t),tn(n,t)}export{de as component,ge as universal};
