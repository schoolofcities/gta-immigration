import{t as V,a as p,n as H,c as oe}from"../chunks/Cf1Ji9YY.js";import"../chunks/l3BAmYos.js";import{F as $,ap as B,L as m,B as K,I as ee,Q as j,g as e,K as i,J as s,G as N,f as X,au as Q,av as J,e as ne,aw as fe,_ as ie,C as pe}from"../chunks/BcaDT9qf.js";import{P as _e,e as W,c as F,a as le,s as t,C as me,O as ue,d as se,f as ye,T as xe}from"../chunks/CEKe5COV.js";import{a as L,p as Z}from"../chunks/D6Lsk_Gr.js";import{o as ve}from"../chunks/GI9JK1j2.js";import{j as be,c as we,S as ce,l as Ce,a as ke}from"../chunks/BNi6iHPC.js";import{s as R}from"../chunks/BDG1Vv6z.js";import{i as U}from"../chunks/EyUDMLWb.js";import{g as Se,a as Ae}from"../chunks/BZRyRBhv.js";import{i as Me}from"../chunks/B_a6ThXA.js";/* empty css                */const Pe=!0,_t=Object.freeze(Object.defineProperty({__proto__:null,prerender:Pe},Symbol.toStringTag,{value:"Module"}));var De=V('<div class="plots-title svelte-1jwe2te"><h4>Ridings with more visible minorities are increasingly voting Conservative</h4> <p>Correlation between visible minorities (as % of population) and voting Conservative in Ontario elections</p></div> <div class="plots-container svelte-1jwe2te"></div> <div class="plots-title svelte-1jwe2te"><h4></h4> <p>Correlation between visible minorities (as % of population) and voting Conservative in federal elections</p></div> <div class="plots-container svelte-1jwe2te"></div>',1);function Te(O,a){$(a,!0);const y=[{year:1999,region:"ontario"},{year:2003,region:"ontario"},{year:2007,region:"ontario"},{year:2011,region:"ontario"},{year:2014,region:"ontario"},{year:2018,region:"ontario"},{year:2022,region:"ontario"},{year:2025,region:"ontario"}],u=[{year:2004,region:"federal"},{year:2006,region:"federal"},{year:2008,region:"federal"},{year:2011,region:"federal"},{year:2015,region:"federal"},{year:2019,region:"federal"},{year:2021,region:"federal"},{year:2025,region:"federal"}],g="cons1",w=_e.find(r=>r.tag===g).propertyTag,x=75,D=75,C=-.5,k=.25;let b=B(L([])),f=B(L([]));ve(()=>{l(y,"ontario"),l(u,"federal")});function l(r,n){const T=r.map(h=>{const S=n==="ontario"?`/gta-immigration/data/elections/ont-ed_stats_${h.year}.geojson`:`/gta-immigration/data/elections/fed_stats_${h.year}.geojson`;return Promise.all([be(S),we("/gta-immigration/data/elections_analysis/ed_corrs_vm.csv")]).then(([c,o])=>{const d=o.find(P=>P.year===h.year.toString()&&P.region===h.region),A=c.features.map(P=>({x:P.properties.pct_vm,y:P.properties[w],geoname:P.properties.geoname}));return{year:h.year,points:A,correlation:d?parseFloat(d[`corr_pct_vm_${g}`]):0}})});Promise.all(T).then(h=>{n==="ontario"?j(b,L(h.sort((S,c)=>S.year-c.year))):j(f,L(h.sort((S,c)=>S.year-c.year)))}).catch(h=>{console.error("Error loading data:",h)})}var v=De(),M=m(K(v),2);W(M,21,()=>e(b),F,(r,n)=>{ce(r,{get points(){return e(n).points},get correlation(){return e(n).correlation},get year(){return e(n).year},showArrows:!1,height:x,plotWidth:D,colorStart:C,colorEnd:k})}),i(M);var _=m(M,4);W(_,21,()=>e(f),F,(r,n)=>{ce(r,{get points(){return e(n).points},get correlation(){return e(n).correlation},get year(){return e(n).year},showArrows:!1,height:x,plotWidth:D,colorStart:C,colorEnd:k})}),i(_),p(O,v),ee()}var Ee=H('<path class="riding svelte-1ru7782" stroke-width="0.3"></path>'),je=H('<rect class="box svelte-1ru7782" width="40" height="12" y="30"></rect>'),Oe=H('<line y1="30" y2="60" stroke="var(--brandDarkBlue)" stroke-width="1" stroke-dasharray="4,3"></line><text class="legend-note svelte-1ru7782" y="70" text-anchor="middle">Cons. gained 7.6% nationally</text>',1),qe=H('<text class="label legend svelte-1ru7782" y="55" text-anchor="middle"> </text>'),Ne=H('<svg><defs><pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4"><path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" stroke="#cccccc" stroke-width="1"></path></pattern></defs><text class="label svelte-1ru7782" x="5" y="22"> </text><!><!><!><!></svg>'),We=V('<div class="map-inner-container svelte-1ru7782"><!></div>');function de(O,a){$(a,!0);let y=Z(a,"mapData",19,()=>[]),u=B(null),g=X(()=>e(u)),w=X(()=>e(g)/1.4),x=X(()=>Ae().center([-79.38,43.68]).scale([e(g)*32]).translate([e(g)/2.3,e(w)/1.4]).angle([-25])),D=X(()=>Se(e(x)));function C(l){if(l==null)return"url(#diagonalHatch)";const v=a.mapConfig.breaks,M=a.mapConfig.colours;if(l<v[0])return M[0];for(let _=0;_<v.length-1;_++)if(l>=v[_]&&l<v[_+1])return M[_+1];return M[M.length-1]}var k=We(),b=s(k);{var f=l=>{var v=Ne(),M=m(s(v)),_=s(M,!0);i(M);var r=m(M);W(r,17,y,F,(c,o)=>{var d=Ee();N((A,P)=>{t(d,"d",A),t(d,"fill",P)},[()=>e(D)(e(o)),()=>C(e(o).properties[a.dataKey])]),p(c,d)});var n=m(r);W(n,17,()=>a.mapConfig.colours,F,(c,o,d)=>{var A=je();t(A,"x",5+d*40),N(()=>t(A,"style",`fill:${e(o)??""}; stroke: white;`)),p(c,A)});var T=m(n);{var h=c=>{var o=Oe(),d=K(o);t(d,"x1",65),t(d,"x2",65);var A=m(d);t(A,"x",65),p(c,o)};U(T,c=>{a.dataKey==="cons_pct_change"&&c(h)})}var S=m(T);W(S,17,()=>a.mapConfig.breaks,F,(c,o,d)=>{var A=qe();t(A,"x",5+(d+1)*40);var P=s(A);i(A),N(()=>R(P,`${a.mapConfig.breakPrefix??""}${e(o)??""}${a.mapConfig.breakSuffix??""}`)),p(c,A)}),i(v),N(()=>{t(v,"width",e(g)),t(v,"height",e(w)),t(v,"id",a.year),R(_,a.mapConfig.name)}),p(l,v)};U(b,l=>{y().length>0&&l(f)})}i(k),le(k,"offsetWidth",l=>j(u,l)),p(O,k),ee()}var Fe=V("<p>Loading data...</p>"),He=V('<p class="error svelte-1v53sb0"> </p>'),Re=V('<div class="plots-title"><h4>Conservatives made major gains in the visible minority-heavy GTA suburbs</h4> <p>Many ridings saw gains far in excess of their national vote share change of 7.6%. In Brampton West, a riding where just under 90% of the population are visible minorities, the Conservatives gained 22% and flipped the seat - their 4th largest gain in the country.</p></div> <div class="maps-container svelte-1v53sb0"><div class="map-section svelte-1v53sb0"><!></div> <div class="map-section svelte-1v53sb0"><!></div></div>',1),Ve=V('<div class="panel-container svelte-1v53sb0"><!></div>');function Ie(O,a){$(a,!0);let y=B(null),u=B(!0),g=B(null);const w={VM:{breaks:[10,20,30,40,50,60],breakPrefix:"",breakSuffix:"%",name:"Visible Minority (% of population)",colours:me.pct_vm},VoteShareChange:{breaks:[5,10,15,20],breakPrefix:"+",breakSuffix:"%",name:"Change in Conservative Vote Share, 2021-2025 (%)",colours:ue.cons_change}};ve(async()=>{try{const b=await fetch("/gta-immigration/data/elections/fed_stats_2025.geojson");if(!b.ok)throw new Error("Failed to load data");const f=await b.json();j(y,L(f.features)),j(u,!1)}catch(b){j(g,L(b.message)),j(u,!1)}});var x=Ve(),D=s(x);{var C=b=>{var f=Fe();p(b,f)},k=b=>{var f=oe(),l=K(f);{var v=_=>{var r=He(),n=s(r);i(r),N(()=>R(n,`Error: ${e(g)??""}`)),p(_,r)},M=_=>{var r=oe(),n=K(r);{var T=h=>{var S=Re(),c=m(K(S),2),o=s(c),d=s(o);de(d,{get mapData(){return e(y)},get mapConfig(){return w.VM},dataKey:"pct_vm",year:"2025"}),i(o);var A=m(o,2),P=s(A);de(P,{get mapData(){return e(y)},get mapConfig(){return w.VoteShareChange},dataKey:"cons_pct_change",year:"2025"}),i(A),i(c),p(h,S)};U(n,h=>{e(y)&&h(T)},!0)}p(_,r)};U(l,_=>{e(g)?_(v):_(M,!1)},!0)}p(b,f)};U(D,b=>{e(u)?b(C):b(k,!1)})}i(x),p(O,x),ee()}var Ge=H('<text y="12" text-anchor="middle" font-size="11"> </text>'),ze=H('<text text-anchor="middle" fill="white" font-weight="bold" font-size="11"> </text>'),Le=H('<rect stroke="#ffffff" stroke-width="1"></rect><!>',1),Be=V('<div class="profile-container svelte-10vri73"><svg width="100%" preserveAspectRatio="xMinYMin meet"><!><!></svg> <div class="header svelte-10vri73"> </div> <div class="description svelte-10vri73"> </div></div>');function Ke(O,a){$(a,!0);let y=Z(a,"showLabels",3,!1),u=Z(a,"electionLabels",19,()=>[]),g=B(340),w=X(()=>e(g)-20),x=X(()=>Math.max(40,Math.floor(e(w)/5)));const D=20,C=40,k=29,b=15;var f=Be(),l=s(f);t(l,"height",C);var v=s(l);W(v,17,u,F,(h,S,c)=>{var o=Ge(),d=s(o,!0);i(o),N(()=>{t(o,"x",c*e(x)+e(x)/2),t(o,"opacity",y()?1:0),R(d,e(S))}),p(h,o)});var M=m(v);W(M,17,()=>a.profile.votes,F,(h,S,c)=>{var o=Le(),d=K(o);t(d,"y",b),t(d,"height",D);var A=m(d);{var P=G=>{var Y=ze();t(Y,"y",k);var re=s(Y,!0);i(Y),N(()=>{t(Y,"x",c*e(x)+e(x)/2),R(re,ye[e(S)]||"NA")}),p(G,Y)};U(A,G=>{y()&&G(P)})}N(()=>{t(d,"x",c*e(x)),t(d,"width",e(x)),t(d,"fill",se[e(S)]||se.NA)}),p(h,o)}),i(l);var _=m(l,2),r=s(_,!0);i(_);var n=m(_,2),T=s(n,!0);i(n),i(f),N(()=>{t(l,"viewBox",`0 0 ${e(x)*5} ${C}`),R(r,a.profile.header),R(T,a.profile.description)}),le(f,"clientWidth",h=>j(g,h)),p(O,f),ee()}var Ue=V('<div class="profiles-grid svelte-zqupcl"></div>');function Ye(O){const a=[{votes:["lib","lib","ndp","ndp","cons1"],header:"Ahmed, early 30s, Don Valley West",description:"2-3 sentence quote from qualitative data"},{votes:["NA","ndp","ndp","lib","lib"],header:"Edward, mid 20s, Markham-Unionville",description:"2-3 sentence quote from qualitative data"},{votes:["NA","NA","ndp","ndp","ndp"],header:"Priya, early 20s, Brampton East",description:"2-3 sentence quote from qualitative data"},{votes:["lib","ndp","lib","ndp","cons1"],header:"Olivia, late 20s, Scarborough North",description:"2-3 sentence quote from qualitative data"}],y=["Fed. 2015","Ont. 2018","Fed. 2019","Fed. 2021","Ont. 2022"];var u=Ue();W(u,5,()=>a,F,(g,w,x)=>{Ke(g,{get profile(){return e(w)},showLabels:x===0,electionLabels:y})}),i(u),p(O,u)}var Je=H('<line stroke="#e0e0e0" stroke-width="0.5"></line>'),Qe=H('<text class="bar-chart-tick svelte-1q8dgyi" font-size="9"> </text>'),Xe=H("<rect></rect>"),Ze=H('<circle fill="#00A189" stroke="white" stroke-width="0"></circle>'),$e=H('<svg><g><!><g></g><text class="bar-chart-title svelte-1q8dgyi" font-size="14"> </text><!><line stroke="#000000" stroke-width="1" stroke-dasharray="4,3" opacity="1"></line><!></g></svg>'),et=V('<div class="chart-container svelte-1q8dgyi"><!></div>');function tt(O,a){$(a,!1);const y=J(),u=J(),g=J(),w=J(),x=J(),D=J();let C=Z(a,"info",8),k=Z(a,"data",8),b=Z(a,"vmField",8),f=J(300);const l=134,v={top:20,right:5,bottom:20,left:6},M=18,_=14,r=6,n=10;Q(()=>e(f),()=>{j(y,e(f)-v.left-v.right)}),Q(()=>{},()=>{j(u,l-v.top-v.bottom)}),Q(()=>e(y),()=>{j(g,Ce().domain([0,75]).range([0,e(y)]))}),Q(()=>ne(C()),()=>{j(w,C().region==="ont-"?"Ontario":"Federal")}),Q(()=>ne(C()),()=>{j(x,C().vm_type==="sa"?"South Asian":"Chinese")}),Q(()=>(e(w),ne(C())),()=>{j(D,`${e(w)} ${C().year}`)}),fe(),Me();var T=et(),h=s(T);{var S=c=>{var o=$e();t(o,"height",l);var d=s(o),A=s(d);W(A,0,()=>[0,20,40,60],F,(I,z)=>{var q=Je();t(q,"y1",0),N(E=>{t(q,"x1",E),t(q,"x2",E),t(q,"y2",e(u))},[()=>e(g)(z)],ie),p(I,q)});var P=m(A);W(P,4,()=>[0,20,40,60],F,(I,z)=>{var q=Qe();t(q,"y",10);var E=s(q);i(q),N(ae=>{t(q,"x",ae),R(E,`${z??""}%`)},[()=>e(g)(z)],ie),p(I,q)}),i(P);var G=m(P);t(G,"y",-5);var Y=s(G,!0);i(G);var re=m(G);W(re,1,k,F,(I,z,q)=>{var E=Xe();t(E,"x",0),t(E,"y",n+q*M-_/2),t(E,"height",_),t(E,"rx",1),t(E,"ry",1),N(ae=>{t(E,"width",ae),t(E,"fill",se.cons1)},[()=>e(g)(+e(z).cons1_pct)],ie),p(I,E)});var te=m(re);t(te,"y1",0);var ge=m(te);W(ge,1,k,F,(I,z,q)=>{var E=Ze();t(E,"cy",n+q*M),t(E,"r",r),N(ae=>t(E,"cx",ae),[()=>e(g)(+e(z)[b()])],ie),p(I,E)}),i(d),i(o),N(I=>{t(o,"width",e(f)),t(d,"transform",`translate(${v.left},${v.top})`),t(P,"transform",`translate(0,${e(u)})`),t(G,"x",e(y)/2),R(Y,e(D)),t(te,"x1",I),t(te,"x2",I),t(te,"y2",e(u))},[()=>e(g)(C().pct_cons_total)],ie),p(c,o)};U(h,c=>{k()&&c(S)})}i(T),le(T,"clientWidth",c=>j(f,c)),p(O,T),ee()}var at=V('<div class="plots-title"><h4> </h4> <p> </p></div> <div class="charts-grid svelte-1tpgrjg"><!></div>',1);function he(O,a){$(a,!0);const y=5,u=[{region:"ont-",vm_type:"sa",vm_field:"pct_vm_sa",year:2014,pct_cons_total:31.2},{region:"ont-",vm_type:"sa",vm_field:"pct_vm_sa",year:2025,pct_cons_total:43},{region:"f",vm_type:"sa",vm_field:"pct_vm_sa",year:2015,pct_cons_total:31.9},{region:"f",vm_type:"sa",vm_field:"pct_vm_sa",year:2025,pct_cons_total:41.3}],g=[{region:"ont-",vm_type:"chn",vm_field:"pct_vm_chn",year:2014,pct_cons_total:31.2},{region:"ont-",vm_type:"chn",vm_field:"pct_vm_chn",year:2025,pct_cons_total:43},{region:"f",vm_type:"chn",vm_field:"pct_vm_chn",year:2015,pct_cons_total:31.9},{region:"f",vm_type:"chn",vm_field:"pct_vm_chn",year:2025,pct_cons_total:41.3}];let w=B(L([]));async function x(r){try{const n=`/gta-immigration/data/elections_analysis/vm_cons/${r.region}ed_vm-${r.vm_type}_cons_${r.year}.csv`,T=await fetch(n);if(!T.ok)return null;const h=await T.text();return ke(h).slice(0,y)}catch{return null}}ve(async()=>{let r;a.ethnicType==="sa"?r=u:a.ethnicType==="chn"&&(r=g),j(w,L(await Promise.all(r.map(async n=>({info:n,data:await x(n)})))))});var D=at(),C=K(D),k=s(C),b=s(k,!0);i(k);var f=m(k,2),l=s(f,!0);i(f),i(C);var v=m(C,2),M=s(v);{var _=r=>{var n=oe(),T=K(n);W(T,17,()=>e(w),F,(h,S)=>{tt(h,{get info(){return e(S).info},get data(){return e(S).data},get vmField(){return e(S).info.vm_field}})}),p(r,n)};U(M,r=>{e(w)&&r(_)})}i(v),N(()=>{R(b,a.title),R(l,a.subtitle)}),p(O,D),ee()}var it=V(`<main><!> <div class="title"><h1>Rightward shifts amongst visible minorities in the Greater Toronto Area</h1> <p><a href="https://fidanelcioglu.com/" target="_blank">Emine Fidan Elcioglu</a>, <a href="https://www.linkedin.com/in/aniket-k-8a8b9921b/" target="_blank">Aniket Kali</a>, <a href="https://www.linkedin.com/in/serene-tan-530239113" target="_blank">Serene Tan</a>, <a href="https://jamaps.github.io/" target="_blank">Jeff Allen</a> |
            May 2025</p></div> <div class="text"><p>Introduction</p></div> <div class="container"><!></div> <div class="text"><p>Continued introduction</p></div> <div class="text"><h2>What is happening?</h2> <p>Background, historical context, summary of what is driving these changes now</p></div> <div><!></div> <div class="text"><p>Tie in to recent elections</p></div> <div class="text"><h2>2nd Generation Immigrants</h2> <p>Discussion of 2nd gen visible minorities shifting right - introduce the main study, qualitative data, etc.</p></div> <div class="container"><!></div> <div class="text"><p>Summarize key conclusions on 2nd gens</p></div> <div class="text"><h2>South Asian Canadians and Chinese Canadians</h2> <p>Summary of these groups in particular</p></div> <div class="container"><!></div> <div class="text"><p>Discussion on South Asian Canadians.</p></div> <div class="container"><!></div> <div class="text"><p>Discussion on Chinese Canadians</p> <p>Conservative shifts within South Asian and Chinese minorities – highlighting 2nd gen, but then broader discussion on why these communities are shifting right/who in them (from research + prior reporting). Note Mainstreet Research polling.</p></div> <div class="text"><h2>Conclusion</h2> <p>Discuss key factors we didn’t go into as much: income, turnout, disenfranchised</p> <p>Conclusion: why is this happening, what does it mean?</p></div> <div class="text"><br> <br> <div class="footnotes"><h3>Data & Methods</h3></div></div> <div class="text"><div class="footnotes"><h3>Footnotes</h3></div></div></main>`);function mt(O){var a=it(),y=s(a);xe(y,{});var u=m(y,6),g=s(u);Te(g,{}),i(u);var w=m(u,6),x=s(w);Ie(x,{}),i(w);var D=m(w,6),C=s(D);Ye(C),i(D);var k=m(D,6),b=s(k);he(b,{ethnicType:"sa",title:"Conservatives now do better in South Asian-heavy ridings versus in general",subtitle:"Conservative vote share (%) and South Asian (% of population) in the GTA's five most South Asian ridings"}),i(k);var f=m(k,4),l=s(f);he(l,{ethnicType:"chn",title:"Conservatives also do better in Chinese-heavy ridings, but more in Ontario",subtitle:"Conservative vote share (%) and Chinese (% of population) in the GTA's five most Chinese ridings"}),i(f),pe(8),i(a),p(O,a)}export{mt as component,_t as universal};
