import{t as P,a as S,n as T}from"../chunks/CZvCEoAf.js";import"../chunks/C-_cMUFM.js";import{I as E,J as I,K as U,L as f,D as v,Q as H,F as d,m,ap as J,o as y}from"../chunks/BrMkDari.js";import{i as K}from"../chunks/nzxDZ7gL.js";import{b as N,s as g,T as R}from"../chunks/BIVt6Pld.js";import{s as O}from"../chunks/D8iiNIF4.js";import{i as L,b as Q,C as q,e as C,a as j,F as B,c as V}from"../chunks/DbFrbJvV.js";import{o as X}from"../chunks/CatCwdjW.js";import{g as Z,a as $}from"../chunks/BZRyRBhv.js";function W(){var o=[.5],t=[0,1],e,c=1;function i(r){return r!=null&&r<=r?t[Q(o,r,0,c)]:e}return i.domain=function(r){return arguments.length?(o=Array.from(r),c=Math.min(o.length,t.length-1),i):o.slice()},i.range=function(r){return arguments.length?(t=Array.from(r),c=Math.min(o.length,t.length-1),i):t.slice()},i.invertExtent=function(r){var u=t.indexOf(r);return[o[u-1],o[u]]},i.unknown=function(r){return arguments.length?(e=r,i):e},i.copy=function(){return W().domain(o).range(t).unknown(e)},L.apply(i,arguments)}const tt=!0,pt=Object.freeze(Object.defineProperty({__proto__:null,prerender:tt},Symbol.toStringTag,{value:"Module"}));var et=T('<path class="ct svelte-37edv5"></path>'),rt=T('<rect class="box svelte-37edv5" width="40" height="12" y="30"></rect>'),at=T('<text class="label legend svelte-37edv5" y="55" text-anchor="middle"> </text>'),nt=P('<div class="map-inner-container svelte-37edv5"><svg><defs><pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4"><path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" stroke="#cccccc" stroke-width="1"></path></pattern></defs><text class="label svelte-37edv5" x="5" y="22"> </text><!><!><!></svg></div>');function M(o,t){E(t,!0);const e=q.pct_imm.concat(["#002b36"]),c={1961:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:14.85,notImmDist:19.51,popDist:17.98},1981:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:23.62,notImmDist:31.35,popDist:28.61},2001:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:26.68,notImmDist:35.81,popDist:32.01},2021:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:31.58,notImmDist:36.18,popDist:34.15}};let i=J(null),r=J(null),u=y(()=>m(r)),h=y(()=>m(u)/1.55),w=y(()=>$().center([-79.4,43.7]).scale([m(u)*30]).translate([m(u)/2-50,m(h)/2+110]).angle([-30])),b=y(()=>Z(m(w)));W().domain(c[t.curYear].breaks).range(e);function A(a){return a===null?"url(#diagonalHatch)":a<10?e[0]:a<20?e[1]:a<30?e[2]:a<40?e[3]:a<50?e[4]:a<60?e[5]:a<70?e[6]:e[7]}function x(){const a=`/gta-immigration/data/immigration/imm_stats_${t.curYear}.geojson`;fetch(a).then(s=>s.json()).then(s=>{s.features=s.features.map((n,l)=>(n.id||(n.id=l),n)),s.features=s.features.map(n=>(n.properties.colour=A(n.properties.pct_imm),n)),H(i,s.features)})}X(()=>{x()});var _=nt(),p=v(_),k=f(v(p)),D=v(k,!0);d(k);var Y=f(k);C(Y,17,()=>m(i),j,(a,s)=>{var n=et();I(l=>{g(n,"d",l),g(n,"fill",m(s).properties.colour)},[()=>m(b)(m(s))]),S(a,n)});var F=f(Y);C(F,17,()=>e,j,(a,s,n)=>{var l=rt();g(l,"x",5+n*40),I(()=>g(l,"style",`fill:${e[n]??""}; stroke: white;`)),S(a,l)});var z=f(F);C(z,17,()=>c[t.curYear].breaks,j,(a,s,n)=>{var l=at();g(l,"x",5+(n+1)*40);var G=v(l,!0);d(l),I(()=>O(G,c[t.curYear].breaks[n]+c[t.curYear].breakSuffix)),S(a,l)}),d(p),d(_),I(()=>{g(p,"width",m(u)),g(p,"height",m(h)),g(p,"id",t.curYear),O(D,c[t.curYear].name)}),N(_,"offsetWidth",a=>H(r,a)),S(o,_),U()}var it=P(`<main><!> <div class="title"><h1>Changes in Immigrant Settlement Patterns in the Greater Toronto Area</h1> <p>Aniket Kali,
            Serene Tan,
            Jeff Allen
            |
            June 2025</p></div> <div class="text"><p>introduction...</p></div> <div class="map-grid svelte-1ng7glt"><div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div></div> <div class="text"><h2>How do immigrants compare to the general population?</h2> <p>information...</p></div> <div class="text"><p>explanation...</p> <p>conclusion...</p></div> <div class="text"><br> <br> <div class="footnotes"><h3>Data & Methods</h3></div></div> <div class="text"><!></div></main>`);function gt(o,t){E(t,!1);const e=V(),{footnotes:c}=e;K();var i=it(),r=v(i);R(r,{});var u=f(r,6),h=v(u),w=v(h);M(w,{curYear:1961}),d(h);var b=f(h,2),A=v(b);M(A,{curYear:1981}),d(b);var x=f(b,2),_=v(x);M(_,{curYear:2001}),d(x);var p=f(x,2),k=v(p);M(k,{curYear:2021}),d(p),d(u);var D=f(u,8),Y=v(D);B(Y,{footnotes:c}),d(D),d(i),S(o,i),U()}export{gt as component,pt as universal};
