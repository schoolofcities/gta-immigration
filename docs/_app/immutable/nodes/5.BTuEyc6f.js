import{t as E,a as h,n as H,c as q}from"../chunks/Dyl4cNhN.js";import"../chunks/D3PfHk7b.js";import{F as N,ap as T,L as b,B as W,I as U,Q as V,g as e,K as g,J as _,G as j,f as F,C as X}from"../chunks/CCUDamnF.js";import{P as Y,e as I,c as R,a as Z,s as k,C as $,O as ee,T as ae}from"../chunks/C3uYlOeK.js";import{a as P,p as te}from"../chunks/Bkj2BE9K.js";import{o as Q}from"../chunks/AOA-WlLX.js";import{j as re,c as ie,S as B}from"../chunks/DupliapT.js";import{s as J}from"../chunks/DKBr_THw.js";import{i as G}from"../chunks/uEjOusXR.js";import{g as oe,a as ne}from"../chunks/BZRyRBhv.js";/* empty css                */const se=!0,Pe=Object.freeze(Object.defineProperty({__proto__:null,prerender:se},Symbol.toStringTag,{value:"Module"}));var le=E('<div class="plots-title svelte-dilc47"><h4>Ridings with more visible minorities are increasingly voting Conservative</h4> <p class="svelte-dilc47">Correlation between visible minorities (as % of population) and voting Conservative in Ontario elections</p></div> <div class="plots-container svelte-dilc47"></div> <div class="plots-title svelte-dilc47"><h4></h4> <p class="svelte-dilc47">Correlation between visible minorities (as % of population) and voting Conservative in federal elections</p></div> <div class="plots-container svelte-dilc47"></div>',1);function ce(M,t){N(t,!0);const m=[{year:1999,region:"ontario"},{year:2003,region:"ontario"},{year:2007,region:"ontario"},{year:2011,region:"ontario"},{year:2014,region:"ontario"},{year:2018,region:"ontario"},{year:2022,region:"ontario"},{year:2025,region:"ontario"}],u=[{year:2004,region:"federal"},{year:2006,region:"federal"},{year:2008,region:"federal"},{year:2011,region:"federal"},{year:2015,region:"federal"},{year:2019,region:"federal"},{year:2021,region:"federal"},{year:2025,region:"federal"}],f="cons1",C=Y.find(i=>i.tag===f).propertyTag,w=75,D=75,z=-.5,S=.25;let s=T(P([])),y=T(P([]));Q(()=>{l(m,"ontario"),l(u,"federal")});function l(i,o){const O=i.map(a=>{const d=o==="ontario"?`/gta-immigration/data/elections/ont-ed_stats_${a.year}.geojson`:`/gta-immigration/data/elections/fed_stats_${a.year}.geojson`;return Promise.all([re(d),ie("/gta-immigration/data/elections_analysis/ed_corrs_vm.csv")]).then(([n,p])=>{const x=p.find(A=>A.year===a.year.toString()&&A.region===a.region),K=n.features.map(A=>({x:A.properties.pct_vm,y:A.properties[C],geoname:A.properties.geoname}));return{year:a.year,points:K,correlation:x?parseFloat(x[`corr_pct_vm_${f}`]):0}})});Promise.all(O).then(a=>{o==="ontario"?V(s,P(a.sort((d,n)=>d.year-n.year))):V(y,P(a.sort((d,n)=>d.year-n.year)))}).catch(a=>{console.error("Error loading data:",a)})}var c=le(),v=b(W(c),2);I(v,21,()=>e(s),R,(i,o)=>{B(i,{get points(){return e(o).points},get correlation(){return e(o).correlation},get year(){return e(o).year},showArrows:!1,height:w,plotWidth:D,colorStart:z,colorEnd:S})}),g(v);var r=b(v,4);I(r,21,()=>e(y),R,(i,o)=>{B(i,{get points(){return e(o).points},get correlation(){return e(o).correlation},get year(){return e(o).year},showArrows:!1,height:w,plotWidth:D,colorStart:z,colorEnd:S})}),g(r),h(M,c),U()}var de=H('<path class="riding svelte-zz7l30"></path>'),ve=H('<rect class="box svelte-zz7l30" width="40" height="12" y="30"></rect>'),pe=H('<text class="label legend svelte-zz7l30" y="55" text-anchor="middle"> </text>'),ge=H('<svg><defs><pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4"><path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" stroke="#cccccc" stroke-width="1"></path></pattern></defs><text class="label svelte-zz7l30" x="5" y="22"> </text><!><!><!></svg>'),fe=E('<div class="map-inner-container svelte-zz7l30"><!></div>');function L(M,t){N(t,!0);let m=te(t,"mapData",19,()=>[]),u=T(null),f=F(()=>e(u)),C=F(()=>e(f)/1.4),w=F(()=>ne().center([-79.38,43.68]).scale([e(f)*32]).translate([e(f)/2.3,e(C)/1.4]).angle([-25])),D=F(()=>oe(e(w)));function z(l){if(l==null)return"url(#diagonalHatch)";const c=t.mapConfig.breaks,v=t.mapConfig.colours;if(l<c[0])return v[0];for(let r=0;r<c.length-1;r++)if(l>=c[r]&&l<c[r+1])return v[r+1];return v[v.length-1]}var S=fe(),s=_(S);{var y=l=>{var c=ge(),v=b(_(c)),r=_(v,!0);g(v);var i=b(v);I(i,17,m,R,(a,d)=>{var n=de();j((p,x)=>{k(n,"d",p),k(n,"fill",x)},[()=>e(D)(e(d)),()=>z(e(d).properties[t.dataKey])]),h(a,n)});var o=b(i);I(o,17,()=>t.mapConfig.colours,R,(a,d,n)=>{var p=ve();k(p,"x",5+n*40),j(()=>k(p,"style",`fill:${e(d)??""}; stroke: white;`)),h(a,p)});var O=b(o);I(O,17,()=>t.mapConfig.breaks,R,(a,d,n)=>{var p=pe();k(p,"x",5+(n+1)*40);var x=_(p);g(p),j(()=>J(x,`${t.mapConfig.breakPrefix??""}${e(d)??""}${t.mapConfig.breakSuffix??""}`)),h(a,p)}),g(c),j(()=>{k(c,"width",e(f)),k(c,"height",e(C)),k(c,"id",t.year),J(r,t.mapConfig.name)}),h(l,c)};G(s,l=>{m().length>0&&l(y)})}g(S),Z(S,"offsetWidth",l=>V(u,l)),h(M,S),U()}var he=E("<p>Loading data...</p>"),me=E('<p class="error svelte-1cc6c2r"> </p>'),ue=E('<div class="maps-container svelte-1cc6c2r"><div class="map-section svelte-1cc6c2r"><!></div> <div class="map-section svelte-1cc6c2r"><!></div></div>'),_e=E('<div class="panel-container svelte-1cc6c2r"><!></div>');function ye(M,t){N(t,!0);let m=T(null),u=T(!0),f=T(null);const C={VM:{breaks:[10,20,30,40,50,60],breakPrefix:"",breakSuffix:"%",name:"Visible Minority (% of population)",colours:$.pct_vm},VoteShareChange:{breaks:[5,10,15,20],breakPrefix:"+",breakSuffix:"%",name:"Change in Conservative Vote Share (%)",colours:ee.cons_change}};Q(async()=>{try{const s=await fetch("/gta-immigration/data/elections/fed_stats_2025.geojson");if(!s.ok)throw new Error("Failed to load data");const y=await s.json();V(m,P(y.features)),V(u,!1)}catch(s){V(f,P(s.message)),V(u,!1)}});var w=_e(),D=_(w);{var z=s=>{var y=he();h(s,y)},S=s=>{var y=q(),l=W(y);{var c=r=>{var i=me(),o=_(i);g(i),j(()=>J(o,`Error: ${e(f)??""}`)),h(r,i)},v=r=>{var i=q(),o=W(i);{var O=a=>{var d=ue(),n=_(d),p=_(n);L(p,{get mapData(){return e(m)},get mapConfig(){return C.VM},dataKey:"pct_vm",year:"2025"}),g(n);var x=b(n,2),K=_(x);L(K,{get mapData(){return e(m)},get mapConfig(){return C.VoteShareChange},dataKey:"cons_pct_change",year:"2025"}),g(x),g(d),h(a,d)};G(o,a=>{e(m)&&a(O)},!0)}h(r,i)};G(l,r=>{e(f)?r(c):r(v,!1)},!0)}h(s,y)};G(D,s=>{e(u)?s(z):s(S,!1)})}g(w),h(M,w),U()}var be=E(`<main><!> <div class="title"><h1>Rightward shifts amongst visible minorities in the Greater Toronto Area</h1> <p><a href="https://fidanelcioglu.com/" target="_blank">Emine Fidan Elcioglu</a>, <a href="https://www.linkedin.com/in/aniket-k-8a8b9921b/" target="_blank">Aniket Kali</a>, <a href="https://www.linkedin.com/in/serene-tan-530239113" target="_blank">Serene Tan</a>, <a href="https://jamaps.github.io/" target="_blank">Jeff Allen</a> |
            May 2025</p></div> <div class="text"><p>Introduction</p></div> <div class="container"><p>VIS: Correlation between %VM and %Cons over time, Ontario (1999-2025) and federal (1997-2025), showing a clear trend</p> <!></div> <div class="text"><p>Background, historical context, summary of what is driving these changes now</p></div> <div><p>VIS: Map of %Cons vote share change in the last (federal) election in GTA ridings</p> <p>VIS: Map of %VM in GTA ridings</p> <!></div> <div class="text"><p>Discussion of 2nd gen visible minorities shifting right</p></div> <div class="container"><p>VIS*4: Riding, %VM, %Cons (federal and Ontario) – 2-3 sentence quote from qualitative data</p></div> <div class="text"><p>Summarize key conclusions on 2nd gens</p></div> <div class="container"><p>VIS: %Cons (federal and Ontario) ranked by %VM South Asian (maybe vs. ~2000)</p> <p>VIS: %Cons (federal and Ontario) ranked by %VM Chinese (maybe vs. ~2000)</p></div> <div class="text"><p>Conservative shifts within South Asian and Chinese minorities – highlighting 2nd gen, but then broader discussion on why these communities are shifting right/who in them (from research + prior reporting). Note Mainstreet Research polling.</p> <p>Discuss key factors we didn’t go into as much: income, turnout, disenfranchised</p> <p>Conclusion: why is this happening, what does it mean?</p></div></main>`);function Te(M){var t=be(),m=_(t);ae(m,{});var u=b(m,6),f=b(_(u),2);ce(f,{}),g(u);var C=b(u,4),w=b(_(C),4);ye(w,{}),g(C),X(10),g(t),h(M,t)}export{Te as component,Pe as universal};
