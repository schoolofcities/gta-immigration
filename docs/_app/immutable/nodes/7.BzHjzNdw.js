import{t as q,a as h,n as j,d as U,c as st}from"../chunks/C22z2azu.js";import"../chunks/Cz-Q5q6E.js";import{I as ot,J as D,K as lt,L as g,D as c,Q as B,F as u,g as v,ap as F,f as M,B as L,C as mt}from"../chunks/BUIBreqF.js";import{s as m,b as vt,T as ct}from"../chunks/Di_p6H-G.js";import{s as W}from"../chunks/k3T_mnCm.js";import{i as Q}from"../chunks/Bl4s-lM3.js";import{i as ut,b as dt,C as ft,e as A,a as C}from"../chunks/BC3yg6IH.js";import{o as gt}from"../chunks/DczKhzw9.js";import{g as ht,a as pt}from"../chunks/BZRyRBhv.js";function V(){var d=[.5],t=[0,1],r,o=1;function s(i){return i!=null&&i<=i?t[dt(d,i,0,o)]:r}return s.domain=function(i){return arguments.length?(d=Array.from(i),o=Math.min(d.length,t.length-1),s):d.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),o=Math.min(d.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var f=t.indexOf(i);return[d[f-1],d[f]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return V().domain(d).range(t).unknown(r)},ut.apply(s,arguments)}const _t=!0,Ot=Object.freeze(Object.defineProperty({__proto__:null,prerender:_t},Symbol.toStringTag,{value:"Module"}));var xt=j('<path class="ct svelte-37edv5"></path>'),bt=j('<rect class="box svelte-37edv5" width="40" height="12" y="30"></rect>'),kt=j('<text class="label legend svelte-37edv5" y="55" text-anchor="middle"> </text>'),Dt=j('<text class="label legend svelte-37edv5" x="100" text-anchor="end"><!></text><rect class="bar" height="8" x="104" style="fill: #6D247A; stroke: white;"></rect><text class="label legend svelte-37edv5" text-anchor="start"> </text>',1),Yt=q('<div class="map-inner-container svelte-37edv5"><svg><defs><pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4"><path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" stroke="#cccccc" stroke-width="1"></path></pattern></defs><text class="label svelte-37edv5" x="5" y="22"> </text><!><!><!></svg> <svg height="78"><text class="label svelte-37edv5" x="5" text-anchor="start">Mean distance to Toronto city center:</text><!></svg></div>');function T(d,t){ot(t,!0);const r=ft.pct_imm.concat(["#002b36"]),o={1961:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:14.85,notImmDist:19.51,popDist:17.98},1981:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:23.62,notImmDist:31.35,popDist:28.61},2001:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:26.68,notImmDist:35.81,popDist:32.01},2021:{breaks:[10,20,30,40,50,60,70],breakSuffix:"%",name:`Immigrant (% of population) in ${t.curYear}`,immDist:31.58,notImmDist:36.18,popDist:34.15}};let s=F(null),i=F(null),f=M(()=>v(i)),Y=M(()=>v(f)/1.55),k=M(()=>pt().center([-79.4,43.7]).scale([v(f)*30]).translate([v(f)/2-50,v(Y)/2+110]).angle([-30])),H=M(()=>ht(v(k)));V().domain(o[t.curYear].breaks).range(r);function S(a){return a===null?"url(#diagonalHatch)":a<10?r[0]:a<20?r[1]:a<30?r[2]:a<40?r[3]:a<50?r[4]:a<60?r[5]:a<70?r[6]:r[7]}function O(){const a=`/gta-immigration/data/immigration/imm_stats_${t.curYear}.geojson`;fetch(a).then(n=>n.json()).then(n=>{n.features=n.features.map((e,l)=>(e.id||(e.id=l),e)),n.features=n.features.map(e=>(e.properties.colour=S(e.properties.pct_imm),e)),B(s,n.features)})}gt(()=>{O()});var I=Yt(),p=c(I),P=g(c(p)),X=c(P,!0);u(P);var z=g(P);A(z,17,()=>v(s),C,(a,n)=>{var e=xt();D(l=>{m(e,"d",l),m(e,"fill",v(n).properties.colour)},[()=>v(H)(v(n))]),h(a,e)});var G=g(z);A(G,17,()=>r,C,(a,n,e)=>{var l=bt();m(l,"x",5+e*40),D(()=>m(l,"style",`fill:${r[e]??""}; stroke: white;`)),h(a,l)});var Z=g(G);A(Z,17,()=>o[t.curYear].breaks,C,(a,n,e)=>{var l=kt();m(l,"x",5+(e+1)*40);var _=c(l,!0);u(l),D(()=>W(_,o[t.curYear].breaks[e]+o[t.curYear].breakSuffix)),h(a,l)}),u(p);var E=g(p,2),R=c(E);m(R,"y",12);var K=g(R);A(K,16,()=>["immDist","notImmDist","popDist"],C,(a,n,e)=>{var l=Dt(),_=L(l);m(_,"y",30+e*18);var $=c(_);{var tt=x=>{var y=U("Immigrants");h(x,y)},et=x=>{var y=st(),rt=L(y);{var nt=b=>{var N=U("Non-immigrants");h(b,N)},it=b=>{var N=U("Total pop.");h(b,N)};Q(rt,b=>{n=="notImmDist"?b(nt):b(it,!1)},!0)}h(x,y)};Q($,x=>{n=="immDist"?x(tt):x(et,!1)})}u(_);var J=g(_);m(J,"y",22+e*18);var w=g(J);m(w,"y",30+e*18);var at=c(w);u(w),D(()=>{m(J,"width",200*o[t.curYear][n]/40),m(w,"x",107+200*o[t.curYear][n]/40),W(at,`${o[t.curYear][n]??""} km`)}),h(a,l)}),u(E),u(I),D(()=>{m(p,"width",v(f)),m(p,"height",v(Y)),m(p,"id",t.curYear),W(X,o[t.curYear].name),m(E,"width",v(f))}),vt(I,"offsetWidth",a=>B(i,a)),h(d,I),lt()}var St=q(`<main><!> <div class="title"><h1>Changes in Immigrant Settlement Patterns in the Greater Toronto Area</h1> <p>Aniket Kali,
            Serene Tan,
            Jeff Allen <br> <br> April 2025</p></div> <div class="text"><p>introduction...</p></div> <div class="map-grid svelte-1ng7glt"><div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div> <div class="map-outer-container svelte-1ng7glt"><!></div></div> <div class="text"><h2>How do immigrants compare to the general population?</h2> <p>information...</p></div> <div class="text"><p>explanation...</p> <p>conclusion...</p></div> <div class="text"><h2>Data & Methods</h2> <p>information...</p></div></main>`);function Pt(d){var t=St(),r=c(t);ct(r,{});var o=g(r,6),s=c(o),i=c(s);T(i,{curYear:1961}),u(s);var f=g(s,2),Y=c(f);T(Y,{curYear:1981}),u(f);var k=g(f,2),H=c(k);T(H,{curYear:2001}),u(k);var S=g(k,2),O=c(S);T(O,{curYear:2021}),u(S),u(o),mt(6),u(t),h(d,t)}export{Pt as component,Ot as universal};
