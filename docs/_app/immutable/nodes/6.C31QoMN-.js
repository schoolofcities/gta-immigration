import{t as W,a as m,n as q,c as ne}from"../chunks/Cf1Ji9YY.js";import"../chunks/l3BAmYos.js";import{F as $,ap as I,L as A,B as Z,I as ee,Q as P,g as e,K as i,J as g,G as O,f as Q,au as J,av as B,e as ie,aw as ge,_ as oe,C as me}from"../chunks/BcaDT9qf.js";import{P as pe,e as N,c as T,a as se,s as t,C as _e,O as ue,d as ce,f as ye,T as xe}from"../chunks/DDrxPR51.js";import{a as L,p as X}from"../chunks/D6Lsk_Gr.js";import{o as le}from"../chunks/GI9JK1j2.js";import{j as be,c as we,S as ve,l as Ce,a as Se}from"../chunks/Lw46CPhV.js";import{s as V}from"../chunks/BDG1Vv6z.js";import{i as K}from"../chunks/EyUDMLWb.js";import{g as ke,a as Ae}from"../chunks/BZRyRBhv.js";import{i as Me}from"../chunks/B_a6ThXA.js";/* empty css                */const Pe=!0,mt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Pe},Symbol.toStringTag,{value:"Module"}));var Ee=W('<div class="plots-title svelte-dilc47"><h4>Ridings with more visible minorities are increasingly voting Conservative</h4> <p class="svelte-dilc47">Correlation between visible minorities (as % of population) and voting Conservative in Ontario elections</p></div> <div class="plots-container svelte-dilc47"></div> <div class="plots-title svelte-dilc47"><h4></h4> <p class="svelte-dilc47">Correlation between visible minorities (as % of population) and voting Conservative in federal elections</p></div> <div class="plots-container svelte-dilc47"></div>',1);function ze(E,a){$(a,!0);const p=[{year:1999,region:"ontario"},{year:2003,region:"ontario"},{year:2007,region:"ontario"},{year:2011,region:"ontario"},{year:2014,region:"ontario"},{year:2018,region:"ontario"},{year:2022,region:"ontario"},{year:2025,region:"ontario"}],_=[{year:2004,region:"federal"},{year:2006,region:"federal"},{year:2008,region:"federal"},{year:2011,region:"federal"},{year:2015,region:"federal"},{year:2019,region:"federal"},{year:2021,region:"federal"},{year:2025,region:"federal"}],s="cons1",w=pe.find(C=>C.tag===s).propertyTag,l=75,M=75,S=-.5,c=.25;let h=I(L([])),f=I(L([]));le(()=>{o(p,"ontario"),o(_,"federal")});function o(C,y){const F=C.map(v=>{const x=y==="ontario"?`/gta-immigration/data/elections/ont-ed_stats_${v.year}.geojson`:`/gta-immigration/data/elections/fed_stats_${v.year}.geojson`;return Promise.all([be(x),we("/gta-immigration/data/elections_analysis/ed_corrs_vm.csv")]).then(([d,n])=>{const b=n.find(D=>D.year===v.year.toString()&&D.region===v.region),j=d.features.map(D=>({x:D.properties.pct_vm,y:D.properties[w],geoname:D.properties.geoname}));return{year:v.year,points:j,correlation:b?parseFloat(b[`corr_pct_vm_${s}`]):0}})});Promise.all(F).then(v=>{y==="ontario"?P(h,L(v.sort((x,d)=>x.year-d.year))):P(f,L(v.sort((x,d)=>x.year-d.year)))}).catch(v=>{console.error("Error loading data:",v)})}var r=Ee(),k=A(Z(r),2);N(k,21,()=>e(h),T,(C,y)=>{ve(C,{get points(){return e(y).points},get correlation(){return e(y).correlation},get year(){return e(y).year},showArrows:!1,height:l,plotWidth:M,colorStart:S,colorEnd:c})}),i(k);var u=A(k,4);N(u,21,()=>e(f),T,(C,y)=>{ve(C,{get points(){return e(y).points},get correlation(){return e(y).correlation},get year(){return e(y).year},showArrows:!1,height:l,plotWidth:M,colorStart:S,colorEnd:c})}),i(u),m(E,r),ee()}var De=q('<path class="riding svelte-zz7l30"></path>'),Oe=q('<rect class="box svelte-zz7l30" width="40" height="12" y="30"></rect>'),Fe=q('<text class="label legend svelte-zz7l30" y="55" text-anchor="middle"> </text>'),Ne=q('<svg><defs><pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4"><path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" stroke="#cccccc" stroke-width="1"></path></pattern></defs><text class="label svelte-zz7l30" x="5" y="22"> </text><!><!><!></svg>'),Te=W('<div class="map-inner-container svelte-zz7l30"><!></div>');function de(E,a){$(a,!0);let p=X(a,"mapData",19,()=>[]),_=I(null),s=Q(()=>e(_)),w=Q(()=>e(s)/1.4),l=Q(()=>Ae().center([-79.38,43.68]).scale([e(s)*32]).translate([e(s)/2.3,e(w)/1.4]).angle([-25])),M=Q(()=>ke(e(l)));function S(o){if(o==null)return"url(#diagonalHatch)";const r=a.mapConfig.breaks,k=a.mapConfig.colours;if(o<r[0])return k[0];for(let u=0;u<r.length-1;u++)if(o>=r[u]&&o<r[u+1])return k[u+1];return k[k.length-1]}var c=Te(),h=g(c);{var f=o=>{var r=Ne(),k=A(g(r)),u=g(k,!0);i(k);var C=A(k);N(C,17,p,T,(v,x)=>{var d=De();O((n,b)=>{t(d,"d",n),t(d,"fill",b)},[()=>e(M)(e(x)),()=>S(e(x).properties[a.dataKey])]),m(v,d)});var y=A(C);N(y,17,()=>a.mapConfig.colours,T,(v,x,d)=>{var n=Oe();t(n,"x",5+d*40),O(()=>t(n,"style",`fill:${e(x)??""}; stroke: white;`)),m(v,n)});var F=A(y);N(F,17,()=>a.mapConfig.breaks,T,(v,x,d)=>{var n=Fe();t(n,"x",5+(d+1)*40);var b=g(n);i(n),O(()=>V(b,`${a.mapConfig.breakPrefix??""}${e(x)??""}${a.mapConfig.breakSuffix??""}`)),m(v,n)}),i(r),O(()=>{t(r,"width",e(s)),t(r,"height",e(w)),t(r,"id",a.year),V(u,a.mapConfig.name)}),m(o,r)};K(h,o=>{p().length>0&&o(f)})}i(c),se(c,"offsetWidth",o=>P(_,o)),m(E,c),ee()}var We=W("<p>Loading data...</p>"),qe=W('<p class="error svelte-1cc6c2r"> </p>'),He=W('<div class="maps-container svelte-1cc6c2r"><div class="map-section svelte-1cc6c2r"><!></div> <div class="map-section svelte-1cc6c2r"><!></div></div>'),Re=W('<div class="panel-container svelte-1cc6c2r"><!></div>');function Ve(E,a){$(a,!0);let p=I(null),_=I(!0),s=I(null);const w={VM:{breaks:[10,20,30,40,50,60],breakPrefix:"",breakSuffix:"%",name:"Visible Minority (% of population)",colours:_e.pct_vm},VoteShareChange:{breaks:[5,10,15,20],breakPrefix:"+",breakSuffix:"%",name:"Change in Conservative Vote Share (%)",colours:ue.cons_change}};le(async()=>{try{const h=await fetch("/gta-immigration/data/elections/fed_stats_2025.geojson");if(!h.ok)throw new Error("Failed to load data");const f=await h.json();P(p,L(f.features)),P(_,!1)}catch(h){P(s,L(h.message)),P(_,!1)}});var l=Re(),M=g(l);{var S=h=>{var f=We();m(h,f)},c=h=>{var f=ne(),o=Z(f);{var r=u=>{var C=qe(),y=g(C);i(C),O(()=>V(y,`Error: ${e(s)??""}`)),m(u,C)},k=u=>{var C=ne(),y=Z(C);{var F=v=>{var x=He(),d=g(x),n=g(d);de(n,{get mapData(){return e(p)},get mapConfig(){return w.VM},dataKey:"pct_vm",year:"2025"}),i(d);var b=A(d,2),j=g(b);de(j,{get mapData(){return e(p)},get mapConfig(){return w.VoteShareChange},dataKey:"cons_pct_change",year:"2025"}),i(b),i(x),m(v,x)};K(y,v=>{e(p)&&v(F)},!0)}m(u,C)};K(o,u=>{e(s)?u(r):u(k,!1)},!0)}m(h,f)};K(M,h=>{e(_)?h(S):h(c,!1)})}i(l),m(E,l),ee()}var je=q('<text y="12" text-anchor="middle" font-size="11"> </text>'),Le=q('<text text-anchor="middle" fill="white" font-weight="bold" font-size="11"> </text>'),Ie=q('<rect stroke="#ffffff" stroke-width="1"></rect><!>',1),Ge=W('<div class="profile-container svelte-10vri73"><svg width="100%" preserveAspectRatio="xMinYMin meet"><!><!></svg> <div class="header svelte-10vri73"> </div> <div class="description svelte-10vri73"> </div></div>');function Ue(E,a){$(a,!0);let p=X(a,"showLabels",3,!1),_=X(a,"electionLabels",19,()=>[]),s=I(340),w=Q(()=>e(s)-20),l=Q(()=>Math.max(40,Math.floor(e(w)/5)));const M=20,S=40,c=29,h=15;var f=Ge(),o=g(f);t(o,"height",S);var r=g(o);N(r,17,_,T,(v,x,d)=>{var n=je(),b=g(n,!0);i(n),O(()=>{t(n,"x",d*e(l)+e(l)/2),t(n,"opacity",p()?1:0),V(b,e(x))}),m(v,n)});var k=A(r);N(k,17,()=>a.profile.votes,T,(v,x,d)=>{var n=Ie(),b=Z(n);t(b,"y",h),t(b,"height",M);var j=A(b);{var D=H=>{var G=Le();t(G,"y",c);var ae=g(G,!0);i(G),O(()=>{t(G,"x",d*e(l)+e(l)/2),V(ae,ye[e(x)]||"NA")}),m(H,G)};K(j,H=>{p()&&H(D)})}O(()=>{t(b,"x",d*e(l)),t(b,"width",e(l)),t(b,"fill",ce[e(x)]||ce.NA)}),m(v,n)}),i(o);var u=A(o,2),C=g(u,!0);i(u);var y=A(u,2),F=g(y,!0);i(y),i(f),O(()=>{t(o,"viewBox",`0 0 ${e(l)*5} ${S}`),V(C,a.profile.header),V(F,a.profile.description)}),se(f,"clientWidth",v=>P(s,v)),m(E,f),ee()}var Ye=W('<div class="profiles-grid svelte-zqupcl"></div>');function Be(E){const a=[{votes:["lib","lib","ndp","ndp","cons1"],header:"Ahmed, early 30s, Don Valley West",description:"2-3 sentence quote from qualitative data"},{votes:["NA","ndp","ndp","lib","lib"],header:"Edward, mid 20s, Markham-Unionville",description:"2-3 sentence quote from qualitative data"},{votes:["NA","NA","ndp","ndp","ndp"],header:"Priya, early 20s, Brampton East",description:"2-3 sentence quote from qualitative data"},{votes:["lib","ndp","lib","ndp","cons1"],header:"Olivia, late 20s, Scarborough North",description:"2-3 sentence quote from qualitative data"}],p=["Fed. 2015","Ont. 2018","Fed. 2019","Fed. 2021","Ont. 2022"];var _=Ye();N(_,5,()=>a,T,(s,w,l)=>{Ue(s,{get profile(){return e(w)},showLabels:l===0,electionLabels:p})}),i(_),m(E,_)}var Ke=q('<line stroke="#e0e0e0" stroke-width="0.5"></line>'),Je=q('<text text-anchor="middle" font-size="9"> </text>'),Qe=q('<rect fill="#007FA3"></rect><circle fill="#6d247a" stroke="white" stroke-width="0.5"></circle>',1),Xe=q('<svg><g><!><g></g><text text-anchor="middle" font-size="10" font-weight="bold"> </text><!></g></svg>'),Ze=W('<div class="chart-container svelte-epwk7w"><!></div>');function $e(E,a){$(a,!1);const p=B(),_=B(),s=B(),w=B(),l=B(),M=B();let S=X(a,"info",8),c=X(a,"data",8),h=X(a,"vmField",8),f=B(300);const o=134,r={top:20,right:5,bottom:20,left:6},k=18,u=14,C=6,y=10;J(()=>e(f),()=>{P(p,e(f)-r.left-r.right)}),J(()=>{},()=>{P(_,o-r.top-r.bottom)}),J(()=>e(p),()=>{P(s,Ce().domain([0,70]).range([0,e(p)]))}),J(()=>ie(S()),()=>{P(w,S().region==="ont-"?"Ontario":"Federal")}),J(()=>ie(S()),()=>{P(l,S().vm_type==="sa"?"South Asian":"Chinese")}),J(()=>(e(w),ie(S()),e(l)),()=>{P(M,`${e(w)} ${S().year} - ${e(l)}`)}),ge(),Me();var F=Ze(),v=g(F);{var x=d=>{var n=Xe();t(n,"height",o);var b=g(n),j=g(b);N(j,0,()=>[0,20,40,60],T,(te,U)=>{var z=Ke();t(z,"y1",0),O(Y=>{t(z,"x1",Y),t(z,"x2",Y),t(z,"y2",e(_))},[()=>e(s)(U)],oe),m(te,z)});var D=A(j);N(D,4,()=>[0,20,40,60],T,(te,U)=>{var z=Je();t(z,"y",15);var Y=g(z);i(z),O(R=>{t(z,"x",R),V(Y,`${U??""}%`)},[()=>e(s)(U)],oe),m(te,z)}),i(D);var H=A(D);t(H,"y",-5);var G=g(H,!0);i(H);var ae=A(H);N(ae,1,c,T,(te,U,z)=>{var Y=Qe(),R=Z(Y);t(R,"x",0),t(R,"y",y+z*k-u/2),t(R,"height",u),t(R,"rx",1),t(R,"ry",1);var re=A(R);t(re,"cy",y+z*k),t(re,"r",C),O((he,fe)=>{t(R,"width",he),t(re,"cx",fe)},[()=>e(s)(+e(U).cons1_pct),()=>e(s)(+e(U)[h()])],oe),m(te,Y)}),i(b),i(n),O(()=>{t(n,"width",e(f)),t(b,"transform",`translate(${r.left},${r.top})`),t(D,"transform",`translate(0,${e(_)})`),t(H,"x",e(p)/2),V(G,e(M))}),m(d,n)};K(v,d=>{c()&&d(x)})}i(F),se(F,"clientWidth",d=>P(f,d)),m(E,F),ee()}var et=W('<div class="charts-grid svelte-wq21r3"><!></div>');function tt(E,a){$(a,!0);const p=5,_=[{region:"ont-",vm_type:"sa",year:2014,vm_field:"pct_vm_sa"},{region:"ont-",vm_type:"sa",year:2025,vm_field:"pct_vm_sa"},{region:"f",vm_type:"sa",year:2015,vm_field:"pct_vm_sa"},{region:"f",vm_type:"sa",year:2025,vm_field:"pct_vm_sa"},{region:"ont-",vm_type:"chn",year:2014,vm_field:"pct_vm_chn"},{region:"ont-",vm_type:"chn",year:2025,vm_field:"pct_vm_chn"},{region:"f",vm_type:"chn",year:2015,vm_field:"pct_vm_chn"},{region:"f",vm_type:"chn",year:2025,vm_field:"pct_vm_chn"}];let s=I(L([]));async function w(c){try{const h=`/gta-immigration/data/elections_analysis/vm_cons/${c.region}ed_vm-${c.vm_type}_cons_${c.year}.csv`,f=await fetch(h);if(!f.ok)return null;const o=await f.text();return Se(o).slice(0,p)}catch{return null}}le(async()=>{P(s,L(await Promise.all(_.map(async c=>({info:c,data:await w(c)})))))});var l=et(),M=g(l);{var S=c=>{var h=ne(),f=Z(h);N(f,17,()=>e(s),T,(o,r)=>{$e(o,{get info(){return e(r).info},get data(){return e(r).data},get vmField(){return e(r).info.vm_field}})}),m(c,h)};K(M,c=>{e(s)&&c(S)})}i(l),m(E,l),ee()}var at=W(`<main><!> <div class="title"><h1>Rightward shifts amongst visible minorities in the Greater Toronto Area</h1> <p><a href="https://fidanelcioglu.com/" target="_blank">Emine Fidan Elcioglu</a>, <a href="https://www.linkedin.com/in/aniket-k-8a8b9921b/" target="_blank">Aniket Kali</a>, <a href="https://www.linkedin.com/in/serene-tan-530239113" target="_blank">Serene Tan</a>, <a href="https://jamaps.github.io/" target="_blank">Jeff Allen</a> |
            May 2025</p></div> <div class="text"><p>Introduction</p></div> <div class="container"><!></div> <div class="text"><p>Continued introduction</p></div> <div class="text"><h2>What is happening?</h2> <p>Background, historical context, summary of what is driving these changes now</p></div> <div><!></div> <div class="text"><p>Tie in to recent elections</p></div> <div class="text"><h2>2nd Generation Immigrants</h2> <p>Discussion of 2nd gen visible minorities shifting right - introduce the main study, qualitative data, etc.</p></div> <div class="container"><!></div> <div class="text"><p>Summarize key conclusions on 2nd gens</p></div> <div class="text"><h2>South Asian Canadians and Chinese Canadians</h2> <p>Summary of these groups in particular</p></div> <div class="container"><!></div> <div class="text"><p>Conservative shifts within South Asian and Chinese minorities – highlighting 2nd gen, but then broader discussion on why these communities are shifting right/who in them (from research + prior reporting). Note Mainstreet Research polling.</p></div> <div class="text"><h2>Conclusion</h2> <p>Discuss key factors we didn’t go into as much: income, turnout, disenfranchised</p> <p>Conclusion: why is this happening, what does it mean?</p></div> <div class="text"><br> <br> <div class="footnotes"><h3>Data & Methods</h3></div></div> <div class="text"><div class="footnotes"><h3>Footnotes</h3></div></div></main>`);function pt(E){var a=at(),p=g(a);xe(p,{});var _=A(p,6),s=g(_);ze(s,{}),i(_);var w=A(_,6),l=g(w);Ve(l,{}),i(w);var M=A(w,6),S=g(M);Be(S),i(M);var c=A(M,6),h=g(c);tt(h,{}),i(c),me(8),i(a),m(E,a)}export{pt as component,mt as universal};
