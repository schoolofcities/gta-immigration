const M=Math.PI,v=2*M,p=1e-6,A=v-p;function E(i){this._+=i[0];for(let t=1,e=i.length;t<e;++t)this._+=arguments[t]+i[t]}function P(i){let t=Math.floor(i);if(!(t>=0))throw new Error(`invalid digits: ${i}`);if(t>15)return E;const e=10**t;return function(n){this._+=n[0];for(let s=1,o=n.length;s<o;++s)this._+=Math.round(arguments[s]*e)/e+n[s]}}class S{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?E:P(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,s){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,e,n,s,o,_){this._append`C${+t},${+e},${+n},${+s},${this._x1=+o},${this._y1=+_}`}arcTo(t,e,n,s,o){if(t=+t,e=+e,n=+n,s=+s,o=+o,o<0)throw new Error(`negative radius: ${o}`);let _=this._x1,u=this._y1,h=n-t,l=s-e,a=_-t,f=u-e,r=a*a+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(r>p)if(!(Math.abs(f*h-l*a)>p)||!o)this._append`L${this._x1=t},${this._y1=e}`;else{let c=n-_,$=s-u,m=h*h+l*l,L=c*c+$*$,y=Math.sqrt(m),b=Math.sqrt(r),x=o*Math.tan((M-Math.acos((m+r-L)/(2*y*b)))/2),g=x/b,w=x/y;Math.abs(g-1)>p&&this._append`L${t+g*a},${e+g*f}`,this._append`A${o},${o},0,0,${+(f*c>a*$)},${this._x1=t+w*h},${this._y1=e+w*l}`}}arc(t,e,n,s,o,_){if(t=+t,e=+e,n=+n,_=!!_,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),h=n*Math.sin(s),l=t+u,a=e+h,f=1^_,r=_?s-o:o-s;this._x1===null?this._append`M${l},${a}`:(Math.abs(this._x1-l)>p||Math.abs(this._y1-a)>p)&&this._append`L${l},${a}`,n&&(r<0&&(r=r%v+v),r>A?this._append`A${n},${n},0,1,${f},${t-u},${e-h}A${n},${n},0,1,${f},${this._x1=l},${this._y1=a}`:r>p&&this._append`A${n},${n},0,${+(r>=M)},${f},${this._x1=t+n*Math.cos(o)},${this._y1=e+n*Math.sin(o)}`)}rect(t,e,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function d(i){return function(){return i}}function k(i){let t=3;return i.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);t=n}return i},()=>new S(t)}function q(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function T(i){this._context=i}T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(i,t){switch(i=+i,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,t):this._context.moveTo(i,t);break;case 1:this._point=2;default:this._context.lineTo(i,t);break}}};function C(i){return new T(i)}function N(i){return i[0]}function R(i){return i[1]}function Z(i,t){var e=d(!0),n=null,s=C,o=null,_=k(u);i=typeof i=="function"?i:i===void 0?N:d(i),t=typeof t=="function"?t:t===void 0?R:d(t);function u(h){var l,a=(h=q(h)).length,f,r=!1,c;for(n==null&&(o=s(c=_())),l=0;l<=a;++l)!(l<a&&e(f=h[l],l,h))===r&&((r=!r)?o.lineStart():o.lineEnd()),r&&o.point(+i(f,l,h),+t(f,l,h));if(c)return o=null,c+""||null}return u.x=function(h){return arguments.length?(i=typeof h=="function"?h:d(+h),u):i},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:d(+h),u):t},u.defined=function(h){return arguments.length?(e=typeof h=="function"?h:d(!!h),u):e},u.curve=function(h){return arguments.length?(s=h,n!=null&&(o=s(n)),u):s},u.context=function(h){return arguments.length?(h==null?n=o=null:o=s(n=h),u):n},u}export{Z as l};
