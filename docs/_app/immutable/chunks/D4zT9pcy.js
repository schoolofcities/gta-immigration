import{t as Yn,n as Jn,a as dn}from"./C22z2azu.js";import{I as Wn,D as K,J as gn,g as yn,L as pn,F as Q,K as Xn}from"./BUIBreqF.js";import{s as Gn}from"./k3T_mnCm.js";import{R as Tn,r as Hn,f as Rn,g as Pn,h as Dn,j as Kn,k as un,l as Mn,m as Qn,n as wn,o as V,b as $n,i as nt,e as tt,a as rt}from"./DHOb4E9q.js";import{s as x}from"./B_TmMM2R.js";import{p as F}from"./BgHnKn3G.js";function et(n,t){let r=0,e,i=0,o=0;if(t===void 0)for(let a of n)a!=null&&(a=+a)>=a&&(e=a-i,i+=e/++r,o+=e*(a-i));else{let a=-1;for(let c of n)(c=t(c,++a,n))!=null&&(c=+c)>=c&&(e=c-i,i+=e/++r,o+=e*(c-i))}if(r>1)return o/(r-1)}function vn(n,t){const r=et(n,t);return r&&Math.sqrt(r)}const it=Math.sqrt(50),at=Math.sqrt(10),ot=Math.sqrt(2);function W(n,t,r){const e=(t-n)/Math.max(0,r),i=Math.floor(Math.log10(e)),o=e/Math.pow(10,i),a=o>=it?10:o>=at?5:o>=ot?2:1;let c,l,f;return i<0?(f=Math.pow(10,-i)/a,c=Math.round(n*f),l=Math.round(t*f),c/f<n&&++c,l/f>t&&--l,f=-f):(f=Math.pow(10,i)*a,c=Math.round(n/f),l=Math.round(t/f),c*f<n&&++c,l*f>t&&--l),l<c&&.5<=r&&r<2?W(n,t,r*2):[c,l,f]}function ut(n,t,r){if(t=+t,n=+n,r=+r,!(r>0))return[];if(n===t)return[n];const e=t<n,[i,o,a]=e?W(t,n,r):W(n,t,r);if(!(o>=i))return[];const c=o-i+1,l=new Array(c);if(e)if(a<0)for(let f=0;f<c;++f)l[f]=(o-f)/-a;else for(let f=0;f<c;++f)l[f]=(o-f)*a;else if(a<0)for(let f=0;f<c;++f)l[f]=(i+f)/-a;else for(let f=0;f<c;++f)l[f]=(i+f)*a;return l}function fn(n,t,r){return t=+t,n=+n,r=+r,W(n,t,r)[2]}function ft(n,t,r){t=+t,n=+n,r=+r;const e=t<n,i=e?fn(t,n,r):fn(n,t,r);return(e?-1:1)*(i<0?1/-i:i)}function bn(n,t){let r=0,e=0;if(t===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(++r,e+=i);else{let i=-1;for(let o of n)(o=t(o,++i,n))!=null&&(o=+o)>=o&&(++r,e+=o)}if(r)return e/r}const ct=Math.PI/180,st=180/Math.PI,X=18,zn=.96422,Fn=1,In=.82521,Ln=4/29,L=6/29,Un=3*L*L,lt=L*L*L;function qn(n){if(n instanceof S)return new S(n.l,n.a,n.b,n.opacity);if(n instanceof T)return On(n);n instanceof Tn||(n=Hn(n));var t=rn(n.r),r=rn(n.g),e=rn(n.b),i=$((.2225045*t+.7168786*r+.0606169*e)/Fn),o,a;return t===r&&r===e?o=a=i:(o=$((.4360747*t+.3850649*r+.1430804*e)/zn),a=$((.0139322*t+.0971045*r+.7141733*e)/In)),new S(116*i-16,500*(o-i),200*(i-a),n.opacity)}function cn(n,t,r,e){return arguments.length===1?qn(n):new S(n,t,r,e??1)}function S(n,t,r,e){this.l=+n,this.a=+t,this.b=+r,this.opacity=+e}Rn(S,cn,Pn(Dn,{brighter(n){return new S(this.l+X*(n??1),this.a,this.b,this.opacity)},darker(n){return new S(this.l-X*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,r=isNaN(this.b)?n:n-this.b/200;return t=zn*nn(t),n=Fn*nn(n),r=In*nn(r),new Tn(tn(3.1338561*t-1.6168667*n-.4906146*r),tn(-.9787684*t+1.9161415*n+.033454*r),tn(.0719453*t-.2289914*n+1.4052427*r),this.opacity)}}));function $(n){return n>lt?Math.pow(n,1/3):n/Un+Ln}function nn(n){return n>L?n*n*n:Un*(n-Ln)}function tn(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function rn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function ht(n){if(n instanceof T)return new T(n.h,n.c,n.l,n.opacity);if(n instanceof S||(n=qn(n)),n.a===0&&n.b===0)return new T(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var t=Math.atan2(n.b,n.a)*st;return new T(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function mt(n,t,r,e){return arguments.length===1?ht(n):new T(n,t,r,e??1)}function T(n,t,r,e){this.h=+n,this.c=+t,this.l=+r,this.opacity=+e}function On(n){if(isNaN(n.h))return new S(n.l,0,0,n.opacity);var t=n.h*ct;return new S(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}Rn(T,mt,Pn(Dn,{brighter(n){return new T(this.h,this.c,this.l+X*(n??1),this.opacity)},darker(n){return new T(this.h,this.c,this.l-X*(n??1),this.opacity)},rgb(){return On(this).rgb()}}));function dt(n,t){t||(t=[]);var r=n?Math.min(t.length,n.length):0,e=t.slice(),i;return function(o){for(i=0;i<r;++i)e[i]=n[i]*(1-o)+t[i]*o;return e}}function gt(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function yt(n,t){var r=t?t.length:0,e=n?Math.min(r,n.length):0,i=new Array(e),o=new Array(r),a;for(a=0;a<e;++a)i[a]=ln(n[a],t[a]);for(;a<r;++a)o[a]=t[a];return function(c){for(a=0;a<e;++a)o[a]=i[a](c);return o}}function pt(n,t){var r=new Date;return n=+n,t=+t,function(e){return r.setTime(n*(1-e)+t*e),r}}function Mt(n,t){var r={},e={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?r[i]=ln(n[i],t[i]):e[i]=t[i];return function(o){for(i in r)e[i]=r[i](o);return e}}function ln(n,t){var r=typeof t,e;return t==null||r==="boolean"?Kn(t):(r==="number"?un:r==="string"?(e=wn(t))?(t=e,Mn):Qn:t instanceof wn?Mn:t instanceof Date?pt:gt(t)?dt:Array.isArray(t)?yt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Mt:un)(n,t)}function wt(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}function vt(n,t){var r=V((n=cn(n)).l,(t=cn(t)).l),e=V(n.a,t.a),i=V(n.b,t.b),o=V(n.opacity,t.opacity);return function(a){return n.l=r(a),n.a=e(a),n.b=i(a),n.opacity=o(a),n+""}}var xn={},en={},an=34,q=10,on=13;function _n(n){return new Function("d","return {"+n.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function bt(n,t){var r=_n(n);return function(e,i){return t(r(e),i,n)}}function Nn(n){var t=Object.create(null),r=[];return n.forEach(function(e){for(var i in e)i in t||r.push(t[i]=i)}),r}function N(n,t){var r=n+"",e=r.length;return e<t?new Array(t-e+1).join(0)+r:r}function xt(n){return n<0?"-"+N(-n,6):n>9999?"+"+N(n,6):N(n,4)}function Nt(n){var t=n.getUTCHours(),r=n.getUTCMinutes(),e=n.getUTCSeconds(),i=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":xt(n.getUTCFullYear())+"-"+N(n.getUTCMonth()+1,2)+"-"+N(n.getUTCDate(),2)+(i?"T"+N(t,2)+":"+N(r,2)+":"+N(e,2)+"."+N(i,3)+"Z":e?"T"+N(t,2)+":"+N(r,2)+":"+N(e,2)+"Z":r||t?"T"+N(t,2)+":"+N(r,2)+"Z":"")}function kt(n){var t=new RegExp('["'+n+`
\r]`),r=n.charCodeAt(0);function e(u,s){var y,m,d=i(u,function(p,M){if(y)return y(p,M-1);m=p,y=s?bt(p,s):_n(p)});return d.columns=m||[],d}function i(u,s){var y=[],m=u.length,d=0,p=0,M,k=m<=0,b=!1;u.charCodeAt(m-1)===q&&--m,u.charCodeAt(m-1)===on&&--m;function j(){if(k)return en;if(b)return b=!1,xn;var R,w=d,A;if(u.charCodeAt(w)===an){for(;d++<m&&u.charCodeAt(d)!==an||u.charCodeAt(++d)===an;);return(R=d)>=m?k=!0:(A=u.charCodeAt(d++))===q?b=!0:A===on&&(b=!0,u.charCodeAt(d)===q&&++d),u.slice(w+1,R-1).replace(/""/g,'"')}for(;d<m;){if((A=u.charCodeAt(R=d++))===q)b=!0;else if(A===on)b=!0,u.charCodeAt(d)===q&&++d;else if(A!==r)continue;return u.slice(w,R)}return k=!0,u.slice(w,m)}for(;(M=j())!==en;){for(var g=[];M!==xn&&M!==en;)g.push(M),M=j();s&&(g=s(g,p++))==null||y.push(g)}return y}function o(u,s){return u.map(function(y){return s.map(function(m){return v(y[m])}).join(n)})}function a(u,s){return s==null&&(s=Nn(u)),[s.map(v).join(n)].concat(o(u,s)).join(`
`)}function c(u,s){return s==null&&(s=Nn(u)),o(u,s).join(`
`)}function l(u){return u.map(f).join(`
`)}function f(u){return u.map(v).join(n)}function v(u){return u==null?"":u instanceof Date?Nt(u):t.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u}return{parse:e,parseRows:i,format:a,formatBody:c,formatRows:l,formatRow:f,formatValue:v}}var At=kt(","),Ct=At.parse;function jt(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.text()}function St(n,t){return fetch(n,t).then(jt)}function Et(n){return function(t,r,e){return arguments.length===2&&typeof r=="function"&&(e=r,r=void 0),St(t,r).then(function(i){return n(i,e)})}}var or=Et(Ct);function Tt(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function ur(n,t){return fetch(n,t).then(Tt)}function Rt(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function G(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,e=n.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+n.slice(r+1)]}function U(n){return n=G(Math.abs(n)),n?n[1]:NaN}function Pt(n,t){return function(r,e){for(var i=r.length,o=[],a=0,c=n[0],l=0;i>0&&c>0&&(l+c+1>e&&(c=Math.max(1,e-l)),o.push(r.substring(i-=c,i+c)),!((l+=c+1)>e));)c=n[a=(a+1)%n.length];return o.reverse().join(t)}}function Dt(n){return function(t){return t.replace(/[0-9]/g,function(r){return n[+r]})}}var zt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H(n){if(!(t=zt.exec(n)))throw new Error("invalid format: "+n);var t;return new hn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}H.prototype=hn.prototype;function hn(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}hn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ft(n){n:for(var t=n.length,r=1,e=-1,i;r<t;++r)switch(n[r]){case".":e=i=r;break;case"0":e===0&&(e=r),i=r;break;default:if(!+n[r])break n;e>0&&(e=0);break}return e>0?n.slice(0,e)+n.slice(i+1):n}var Zn;function It(n,t){var r=G(n,t);if(!r)return n+"";var e=r[0],i=r[1],o=i-(Zn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=e.length;return o===a?e:o>a?e+new Array(o-a+1).join("0"):o>0?e.slice(0,o)+"."+e.slice(o):"0."+new Array(1-o).join("0")+G(n,Math.max(0,t+o-1))[0]}function kn(n,t){var r=G(n,t);if(!r)return n+"";var e=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")}const An={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Rt,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>kn(n*100,t),r:kn,s:It,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Cn(n){return n}var jn=Array.prototype.map,Sn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Lt(n){var t=n.grouping===void 0||n.thousands===void 0?Cn:Pt(jn.call(n.grouping,Number),n.thousands+""),r=n.currency===void 0?"":n.currency[0]+"",e=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?Cn:Dt(jn.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",c=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function f(u){u=H(u);var s=u.fill,y=u.align,m=u.sign,d=u.symbol,p=u.zero,M=u.width,k=u.comma,b=u.precision,j=u.trim,g=u.type;g==="n"?(k=!0,g="g"):An[g]||(b===void 0&&(b=12),j=!0,g="g"),(p||s==="0"&&y==="=")&&(p=!0,s="0",y="=");var R=d==="$"?r:d==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",w=d==="$"?e:/[%p]/.test(g)?a:"",A=An[g],P=/[defgprs%]/.test(g);b=b===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function O(h){var D=R,C=w,z,mn,_;if(g==="c")C=A(h)+C,h="";else{h=+h;var Z=h<0||1/h<0;if(h=isNaN(h)?l:A(Math.abs(h),b),j&&(h=Ft(h)),Z&&+h==0&&m!=="+"&&(Z=!1),D=(Z?m==="("?m:c:m==="-"||m==="("?"":m)+D,C=(g==="s"?Sn[8+Zn/3]:"")+C+(Z&&m==="("?")":""),P){for(z=-1,mn=h.length;++z<mn;)if(_=h.charCodeAt(z),48>_||_>57){C=(_===46?i+h.slice(z+1):h.slice(z))+C,h=h.slice(0,z);break}}}k&&!p&&(h=t(h,1/0));var B=D.length+h.length+C.length,E=B<M?new Array(M-B+1).join(s):"";switch(k&&p&&(h=t(E+h,E.length?M-C.length:1/0),E=""),y){case"<":h=D+h+C+E;break;case"=":h=D+E+h+C;break;case"^":h=E.slice(0,B=E.length>>1)+D+h+C+E.slice(B);break;default:h=E+D+h+C;break}return o(h)}return O.toString=function(){return u+""},O}function v(u,s){var y=f((u=H(u),u.type="f",u)),m=Math.max(-8,Math.min(8,Math.floor(U(s)/3)))*3,d=Math.pow(10,-m),p=Sn[8+m/3];return function(M){return y(d*M)+p}}return{format:f,formatPrefix:v}}var Y,Bn,Vn;Ut({thousands:",",grouping:[3],currency:["$",""]});function Ut(n){return Y=Lt(n),Bn=Y.format,Vn=Y.formatPrefix,Y}function qt(n){return Math.max(0,-U(Math.abs(n)))}function Ot(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(U(t)/3)))*3-U(Math.abs(n)))}function _t(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,U(t)-U(n))+1}function Zt(n){return function(){return n}}function Bt(n){return+n}var En=[0,1];function I(n){return n}function sn(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:Zt(isNaN(t)?NaN:.5)}function Vt(n,t){var r;return n>t&&(r=n,n=t,t=r),function(e){return Math.max(n,Math.min(t,e))}}function Yt(n,t,r){var e=n[0],i=n[1],o=t[0],a=t[1];return i<e?(e=sn(i,e),o=r(a,o)):(e=sn(e,i),o=r(o,a)),function(c){return o(e(c))}}function Jt(n,t,r){var e=Math.min(n.length,t.length)-1,i=new Array(e),o=new Array(e),a=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<e;)i[a]=sn(n[a],n[a+1]),o[a]=r(t[a],t[a+1]);return function(c){var l=$n(n,c,1,e)-1;return o[l](i[l](c))}}function Wt(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Xt(){var n=En,t=En,r=ln,e,i,o,a=I,c,l,f;function v(){var s=Math.min(n.length,t.length);return a!==I&&(a=Vt(n[0],n[s-1])),c=s>2?Jt:Yt,l=f=null,u}function u(s){return s==null||isNaN(s=+s)?o:(l||(l=c(n.map(e),t,r)))(e(a(s)))}return u.invert=function(s){return a(i((f||(f=c(t,n.map(e),un)))(s)))},u.domain=function(s){return arguments.length?(n=Array.from(s,Bt),v()):n.slice()},u.range=function(s){return arguments.length?(t=Array.from(s),v()):t.slice()},u.rangeRound=function(s){return t=Array.from(s),r=wt,v()},u.clamp=function(s){return arguments.length?(a=s?!0:I,v()):a!==I},u.interpolate=function(s){return arguments.length?(r=s,v()):r},u.unknown=function(s){return arguments.length?(o=s,u):o},function(s,y){return e=s,i=y,v()}}function Gt(){return Xt()(I,I)}function Ht(n,t,r,e){var i=ft(n,t,r),o;switch(e=H(e??",f"),e.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(t));return e.precision==null&&!isNaN(o=Ot(i,a))&&(e.precision=o),Vn(e,a)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(o=_t(i,Math.max(Math.abs(n),Math.abs(t))))&&(e.precision=o-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(o=qt(i))&&(e.precision=o-(e.type==="%")*2);break}}return Bn(e)}function Kt(n){var t=n.domain;return n.ticks=function(r){var e=t();return ut(e[0],e[e.length-1],r??10)},n.tickFormat=function(r,e){var i=t();return Ht(i[0],i[i.length-1],r??10,e)},n.nice=function(r){r==null&&(r=10);var e=t(),i=0,o=e.length-1,a=e[i],c=e[o],l,f,v=10;for(c<a&&(f=a,a=c,c=f,f=i,i=o,o=f);v-- >0;){if(f=fn(a,c,r),f===l)return e[i]=a,e[o]=c,t(e);if(f>0)a=Math.floor(a/f)*f,c=Math.ceil(c/f)*f;else if(f<0)a=Math.ceil(a*f)/f,c=Math.floor(c*f)/f;else break;l=f}return n},n}function J(){var n=Gt();return n.copy=function(){return Wt(n,J())},nt.apply(n,arguments),Kt(n)}var Qt=Jn('<circle fill-opacity="0.75"></circle>'),$t=Yn('<div class="scatter-plot svelte-1gbkoqg"><svg class="svelte-1gbkoqg"><!><line stroke="#ffffff" stroke-width="5" stroke-linecap="round"></line><text class="scatter-title svelte-1gbkoqg" font-size="14"> </text></svg></div>');function fr(n,t){Wn(t,!0);let r=F(t,"correlation",3,0),e=F(t,"xEnd",3,70),i=F(t,"height",3,100),o=F(t,"plotWidth",3,100),a=F(t,"colorStart",19,()=>-1.5),c=F(t,"colorEnd",3,.35);const l={x:J().domain([0,e()]).range([0,o()]),y:J().domain([0,80]).range([i(),0])},f=J().domain([a(),0,c()]).range(["#4d4d4d","#D0D1C9","#007FA3"]).interpolate(vt),v=bn(t.points,w=>w.x),u=bn(t.points,w=>w.y),s=vn(t.points,w=>w.x),y=vn(t.points,w=>w.y),m=r()*(y/s),d=u-m*v,p={x1:l.x(0),y1:l.y(d),x2:l.x(e()),y2:l.y(m*e()+d)};var M=$t(),k=K(M),b=K(k);tt(b,17,()=>t.points,rt,(w,A)=>{var P=Qt();x(P,"r",2),x(P,"fill","white"),gn((O,h)=>{x(P,"cx",O),x(P,"cy",h)},[()=>l.x(yn(A).x),()=>l.y(yn(A).y)]),dn(w,P)});var j=pn(b),g=pn(j);x(g,"y",15);var R=K(g,!0);Q(g),Q(k),Q(M),gn((w,A)=>{x(M,"style",`width: ${o()??""}px; height: ${i()??""}px;`),x(k,"width",o()),x(k,"height",i()),x(k,"style",`background-color: ${w??""}`),x(j,"x1",p.x1),x(j,"y1",p.y1),x(j,"x2",p.x2),x(j,"y2",p.y2),x(g,"x",A),Gn(R,t.year)},[()=>f(m),()=>l.x(e()/2)]),dn(n,M),Xn()}export{fr as S,Ct as a,or as c,vn as d,Bn as f,ur as j,J as l,bn as m};
