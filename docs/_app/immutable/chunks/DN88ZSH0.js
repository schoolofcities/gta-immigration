import{t as dt,n as vt,a as H}from"./BK7Wmniv.js";import{B as mt,y as I,C as J,g as V,F as K,z,D as yt}from"./Fxx0eZ4n.js";import{s as bt}from"./CJGlZdPQ.js";import{R as tt,r as pt,d as nt,e as rt,C as et,n as k,l as _,a as wt,i as Ct}from"./Gqd4fJSf.js";import{s as h}from"./DV5cpcdT.js";import{p as A}from"./sL20XP9V.js";function xt(t,n){let r=0,e,i=0,o=0;if(n===void 0)for(let c of t)c!=null&&(c=+c)>=c&&(e=c-i,i+=e/++r,o+=e*(c-i));else{let c=-1;for(let v of t)(v=n(v,++c,t))!=null&&(v=+v)>=v&&(e=v-i,i+=e/++r,o+=e*(v-i))}if(r>1)return o/(r-1)}function Q(t,n){const r=xt(t,n);return r&&Math.sqrt(r)}function X(t,n){let r=0,e=0;if(n===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++r,e+=i);else{let i=-1;for(let o of t)(o=n(o,++i,t))!=null&&(o=+o)>=o&&(++r,e+=o)}if(r)return e/r}const Nt=Math.PI/180,Et=180/Math.PI,F=18,it=.96422,at=1,ot=.82521,ct=4/29,R=6/29,ut=3*R*R,Mt=R*R*R;function st(t){if(t instanceof p)return new p(t.l,t.a,t.b,t.opacity);if(t instanceof E)return lt(t);t instanceof tt||(t=pt(t));var n=P(t.r),r=P(t.g),e=P(t.b),i=q((.2225045*n+.7168786*r+.0606169*e)/at),o,c;return n===r&&r===e?o=c=i:(o=q((.4360747*n+.3850649*r+.1430804*e)/it),c=q((.0139322*n+.0971045*r+.7141733*e)/ot)),new p(116*i-16,500*(o-i),200*(i-c),t.opacity)}function Y(t,n,r,e){return arguments.length===1?st(t):new p(t,n,r,e??1)}function p(t,n,r,e){this.l=+t,this.a=+n,this.b=+r,this.opacity=+e}nt(p,Y,rt(et,{brighter(t){return new p(this.l+F*(t??1),this.a,this.b,this.opacity)},darker(t){return new p(this.l-F*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return n=it*L(n),t=at*L(t),r=ot*L(r),new tt(O(3.1338561*n-1.6168667*t-.4906146*r),O(-.9787684*n+1.9161415*t+.033454*r),O(.0719453*n-.2289914*t+1.4052427*r),this.opacity)}}));function q(t){return t>Mt?Math.pow(t,1/3):t/ut+ct}function L(t){return t>R?t*t*t:ut*(t-ct)}function O(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function P(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Tt(t){if(t instanceof E)return new E(t.h,t.c,t.l,t.opacity);if(t instanceof p||(t=st(t)),t.a===0&&t.b===0)return new E(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Et;return new E(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function jt(t,n,r,e){return arguments.length===1?Tt(t):new E(t,n,r,e??1)}function E(t,n,r,e){this.h=+t,this.c=+n,this.l=+r,this.opacity=+e}function lt(t){if(isNaN(t.h))return new p(t.l,0,0,t.opacity);var n=t.h*Nt;return new p(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}nt(E,jt,rt(et,{brighter(t){return new E(this.h,this.c,this.l+F*(t??1),this.opacity)},darker(t){return new E(this.h,this.c,this.l-F*(t??1),this.opacity)},rgb(){return lt(this).rgb()}}));function At(t,n){var r=k((t=Y(t)).l,(n=Y(n)).l),e=k(t.a,n.a),i=k(t.b,n.b),o=k(t.opacity,n.opacity);return function(c){return t.l=r(c),t.a=e(c),t.b=i(c),t.opacity=o(c),t+""}}var G={},B={},Z=34,S=10,W=13;function ft(t){return new Function("d","return {"+t.map(function(n,r){return JSON.stringify(n)+": d["+r+'] || ""'}).join(",")+"}")}function Rt(t,n){var r=ft(t);return function(e,i){return n(r(e),i,t)}}function $(t){var n=Object.create(null),r=[];return t.forEach(function(e){for(var i in e)i in n||r.push(n[i]=i)}),r}function g(t,n){var r=t+"",e=r.length;return e<n?new Array(n-e+1).join(0)+r:r}function Dt(t){return t<0?"-"+g(-t,6):t>9999?"+"+g(t,6):g(t,4)}function St(t){var n=t.getUTCHours(),r=t.getUTCMinutes(),e=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Dt(t.getUTCFullYear())+"-"+g(t.getUTCMonth()+1,2)+"-"+g(t.getUTCDate(),2)+(i?"T"+g(n,2)+":"+g(r,2)+":"+g(e,2)+"."+g(i,3)+"Z":e?"T"+g(n,2)+":"+g(r,2)+":"+g(e,2)+"Z":r||n?"T"+g(n,2)+":"+g(r,2)+"Z":"")}function Ut(t){var n=new RegExp('["'+t+`
\r]`),r=t.charCodeAt(0);function e(a,u){var y,s,l=i(a,function(m,d){if(y)return y(m,d-1);s=m,y=u?Rt(m,u):ft(m)});return l.columns=s||[],l}function i(a,u){var y=[],s=a.length,l=0,m=0,d,C=s<=0,x=!1;a.charCodeAt(s-1)===S&&--s,a.charCodeAt(s-1)===W&&--s;function M(){if(C)return B;if(x)return x=!1,G;var j,f=l,b;if(a.charCodeAt(f)===Z){for(;l++<s&&a.charCodeAt(l)!==Z||a.charCodeAt(++l)===Z;);return(j=l)>=s?C=!0:(b=a.charCodeAt(l++))===S?x=!0:b===W&&(x=!0,a.charCodeAt(l)===S&&++l),a.slice(f+1,j-1).replace(/""/g,'"')}for(;l<s;){if((b=a.charCodeAt(j=l++))===S)x=!0;else if(b===W)x=!0,a.charCodeAt(l)===S&&++l;else if(b!==r)continue;return a.slice(f,j)}return C=!0,a.slice(f,s)}for(;(d=M())!==B;){for(var N=[];d!==G&&d!==B;)N.push(d),d=M();u&&(N=u(N,m++))==null||y.push(N)}return y}function o(a,u){return a.map(function(y){return u.map(function(s){return T(y[s])}).join(t)})}function c(a,u){return u==null&&(u=$(a)),[u.map(T).join(t)].concat(o(a,u)).join(`
`)}function v(a,u){return u==null&&(u=$(a)),o(a,u).join(`
`)}function w(a){return a.map(U).join(`
`)}function U(a){return a.map(T).join(t)}function T(a){return a==null?"":a instanceof Date?St(a):n.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}return{parse:e,parseRows:i,format:c,formatBody:v,formatRows:w,formatRow:U,formatValue:T}}var kt=Ut(","),Ft=kt.parse;function It(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function zt(t,n){return fetch(t,n).then(It)}function _t(t){return function(n,r,e){return arguments.length===2&&typeof r=="function"&&(e=r,r=void 0),zt(n,r).then(function(i){return t(i,e)})}}var Jt=_t(Ft);function qt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Vt(t,n){return fetch(t,n).then(qt)}var Lt=vt('<circle fill-opacity="0.75"></circle>'),Ot=dt('<div class="scatter-plot svelte-1gbkoqg"><svg class="svelte-1gbkoqg"><!><line stroke="#ffffff" stroke-width="5" stroke-linecap="round"></line><text class="scatter-title svelte-1gbkoqg" font-size="14"> </text></svg></div>');function Kt(t,n){mt(n,!0);let r=A(n,"correlation",3,0),e=A(n,"xEnd",3,70),i=A(n,"height",3,100),o=A(n,"plotWidth",3,100),c=A(n,"colorStart",19,()=>-1.5),v=A(n,"colorEnd",3,.35);const w={x:_().domain([0,e()]).range([0,o()]),y:_().domain([0,80]).range([i(),0])},U=_().domain([c(),0,v()]).range(["#4d4d4d","#D0D1C9","#007FA3"]).interpolate(At),T=X(n.points,f=>f.x),a=X(n.points,f=>f.y),u=Q(n.points,f=>f.x),y=Q(n.points,f=>f.y),s=r()*(y/u),l=a-s*T,m={x1:w.x(0),y1:w.y(l),x2:w.x(e()),y2:w.y(s*e()+l)};var d=Ot(),C=I(d),x=I(C);wt(x,17,()=>n.points,Ct,(f,b)=>{var D=Lt();h(D,"r",2),h(D,"fill","white"),J((ht,gt)=>{h(D,"cx",ht),h(D,"cy",gt)},[()=>w.x(V(b).x),()=>w.y(V(b).y)]),H(f,D)});var M=K(x),N=K(M);h(N,"y",15);var j=I(N,!0);z(N),z(C),z(d),J((f,b)=>{h(d,"style",`width: ${o()??""}px; height: ${i()??""}px;`),h(C,"width",o()),h(C,"height",i()),h(C,"style",`background-color: ${f??""}`),h(M,"x1",m.x1),h(M,"y1",m.y1),h(M,"x2",m.x2),h(M,"y2",m.y2),h(N,"x",b),bt(j,n.year)},[()=>U(s),()=>w.x(e()/2)]),H(t,d),yt()}export{Kt as S,Ft as a,Jt as c,Q as d,Vt as j,X as m};
